define("Models/Component",[],(function(){return function(){this.componentConfig=null,this.type=null,this.elementId=null,this.element=null,this.useComponentTemplate=!1,this.data=null,this.state=void 0,this.setComponentConfig=function(ut){this.componentConfig=void 0!==ut?ut:null},this.setType=function(ut){this.type=void 0!==ut?ut:null},this.setElementId=function(ut){this.elementId=void 0!==ut?ut:this.type,this.element=document.getElementById(this.elementId)},this.setUseComponentTemplate=function(ut){ut=void 0===ut||ut,this.useComponentTemplate="boolean"!=typeof ut||ut},this.setData=function(ut){this.data=void 0!==ut?ut:null},this.setState=function(ut){this.state=void 0!==ut?ut:this.state},this.getComponentPath=function(){return null!==this.type?"Components/"+this.type+"/"+this.type:null},this.getElement=function(){return this.element},this.getDictionary=function(){if(!this.element||!this.element.hasAttribute("dictionary"))return null;try{return JSON.parse(this.element.getAttribute("dictionary"))}catch(ut){return null}},this.getComponentConfig=function(){return!this.useComponentTemplate&&this.element&&(this.componentConfig.template={element:this.element}),this.componentConfig}}})),define("ProductUtils/ComponentLoader",["ko","Models/Component"],(function(ut,ht){return function(){this.register=function(pt,mt,gt){var ft=new ht;return ft.setType(pt.type),ft.setElementId(pt.elementId),ft.setData(mt),ft.setState(gt),ft.setUseComponentTemplate(pt.useComponentTemplate),require([ft.getComponentPath()],(function(ht){ft.setComponentConfig(ht),ut.components.register(pt.name,ft.getComponentConfig()),(null!==ft.getElement()||ft.getElement()!=={})&&ut.applyBindingsToNode(ft.getElement(),{component:{name:pt.name,params:{dictionary:ft.getDictionary(),data:ft.data,state:ft.state}}})})),ft},this.unregister=function(ht){ht&&0!==ht.length&&ut.components.isRegistered(ht)&&ut.components.unregister(ht)}}})),define("videoPlayerView",[],(function(){return'<div class="asos-media-players">\r\n    <div class="amp-video-player amp-relative">\r\n        <video class="amp-page amp-video-element" data-bind="foreach: sources" controls="controls" muted>\r\n            <source data-bind="attr: { type: type, src: src }" />\r\n        </video>\r\n        <div class="amp-page amp-page-message amp-error-page" data-bind="visible: isErrorPageVisible">\r\n            <div class="amp-message-container">\r\n                <div class="amp-message-box">\r\n                    <h2 data-bind="html: messages.errorHeaderText"></h2>\r\n                    <p data-bind="html: messages.errorMessageText"></p>\r\n                    <div class="amp-button amp-button-black" data-bind="html: messages.refreshButtonText, click: refreshButtonClicked"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="amp-page amp-page-message amp-unsupported-page" data-bind="visible: isUnsupportedPageVisible">\r\n            <div class="amp-message-container">\r\n                <div class="amp-message-box">\r\n                    <h2 data-bind="html: messages.unsupportedHeaderText"></h2>\r\n                    <p data-bind="html: messages.unsupportedMessageText"></p>\r\n                    <div class="amp-button amp-button-black" data-bind="html: messages.closeButtonText, click: closeButtonClicked"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'})),define("utils/scene7.config",[],(function(){"use strict";return function(ut,ht){this.jsonpCallback="s7jsonResponse",this.jsonpErrorCallback="s7jsonError",this.scene7imageServer=ut,this.scene7videoServer=ht,this.spinsetManifestFileUrlPattern=this.scene7imageServer+"/products/test-desc/[productID]-spinset",this.imageUrlPattern=this.scene7imageServer+"/products/[assetID]",this.maxImageSize={width:4e3,height:4e3},this.imageMinPartitionFactors={horizontal:3,vertical:4}}})),define("utils/scene7.DataProvider",["$"],(function(ut){"use strict";var e=function(ut){this.scene7config=ut,this.manifestCache={}};return e.prototype.ABSOLUTE_URL_REGEX=/^https?:\/\/|^\/\//i,e.requests=[],e.prototype.getJson=function(ht,pt,mt){Object.prototype.hasOwnProperty.call(window,this.scene7config.jsonpErrorCallback)||(window[this.scene7config.jsonpErrorCallback]=function(ut,ht){var pt=e.requests[ht];"function"==typeof pt.onError&&pt.onError()}),Object.prototype.hasOwnProperty.call(window,this.scene7config.jsonpCallback)||(window[this.scene7config.jsonpCallback]=function(ut,ht){var pt=e.requests[ht];"function"==typeof pt.onSuccess&&pt.onSuccess(ut)}),e.requests.push({onSuccess:pt,onError:mt});var gt=e.requests.length-1;ut.ajax({url:ht.replace("[requestID]",gt),jsonp:!1,jsonpCallback:this.scene7config.jsonpCallback+gt,dataType:"jsonp",cache:!0,success:pt,error:mt})},e.prototype.getManifestData=function(ht){this.ABSOLUTE_URL_REGEX.test(ht)||(ht="//"+ht);var pt=new ut.Deferred;if(!this.manifestCache[ht]){var mt=ht+(-1===ht.indexOf("?")?"?":"&")+"req=set,json&id=[requestID]";return this.getJson(mt,function(mt){this.manifestCache[ht]=mt,pt.resolve(ut.extend(!0,{},mt))}.bind(this),(function(){pt.reject()})),pt.promise()}return pt.resolve(ut.extend(!0,{},this.manifestCache[ht])),pt.promise()},e})),define("videoPlayer/DataMapper",[],(function(){"use strict";var t=function(ut){this.scene7config=ut};return t.prototype.VIDEO_FILE_URL_PATTERN="/products/[assetID]",t.prototype.VIDEO_TYPE_FORMAT={m3u8:"application/x-mpegurl",mp4:"video/mp4"},t.prototype.map=function(ut){return ut.set.item.map(this.getAssetFromServerItem.bind(this))},t.prototype.getAssetFromServerItem=function(ut){return{bitrate:parseInt(ut.v.bitrate,10),width:parseInt(ut.v.dx,10),height:parseInt(ut.v.dy,10),src:this.scene7config.scene7videoServer+this.VIDEO_FILE_URL_PATTERN.replace("[assetID]",ut.v.path),format:ut.v.suffix,type:this.VIDEO_TYPE_FORMAT[ut.v.suffix],fps:ut.userdata&&ut.userdata[0]&&ut.userdata[0].Video_Frame_Rate?parseFloat(ut.userdata[0].Video_Frame_Rate):null}},t})),define("utils/deviceHelper",[],(function(){"use strict";var t=function(){return this};return t.prototype.getScreenProperties=function(ut){return{width:ut.screen.width,height:ut.screen.height}},t.prototype.isPhysicalSizeGreaterThanLogicalSize=function(ut){return ut&&void 0!==ut.systemXDPI&&void 0!==ut.logicalXDPI&&ut.systemXDPI>ut.logicalXDPI},t.prototype.getDevicePixelRatio=function(ut){var ht=1;return this.isPhysicalSizeGreaterThanLogicalSize(ut.screen)?ht=ut.screen.systemXDPI/ut.screen.logicalXDPI:void 0!==ut.devicePixelRatio&&(ht=ut.devicePixelRatio),ht},t.prototype.getWidthInPhysicalPixels=function(ut){return this.getScreenProperties(ut).width*this.getDevicePixelRatio(ut)},t.prototype.getHeightInPhysicalPixels=function(ut){return this.getScreenProperties(ut).height*this.getDevicePixelRatio(ut)},new t})),define("videoPlayer/AssetsProvider",["$","utils/deviceHelper"],(function(ut,ht){"use strict";var i=function(ut,ht,pt){this.scene7config=ut,this.dataProvider=ht,this.dataMapper=pt};return i.prototype.MANIFEST_PATH_PATTERN="/products/test-desc/[productID]-catwalk-AVS",i.prototype.DEFAULT_FPS=50,i.prototype.DEFAULT_BITRATES={480:800,720:1200,1080:2500},i.prototype.getAssetsByFormat=function(ut,ht){return ut.filter((function(ut){return ut.format===ht}))},i.prototype.isBetterWidthDifference=function(ut,ht){return 0===ut||ut>0&&0>ht||!(0>ut&&ht>0)&&Math.abs(ut)<=Math.abs(ht)},i.prototype.getBestAssetsByWidth=function(ut){var pt=ht.getWidthInPhysicalPixels(window),mt=ut[0].width,gt=ut[0].width-pt,ft=gt;return ut.forEach(function(ut){ft=ut.width-pt,this.isBetterWidthDifference(ft,gt)&&(mt=ut.width,gt=ft)}.bind(this)),ut.filter((function(ut){return ut.width===mt}))},i.prototype.getPreferredBitrateForDevice=function(ut){ut=ut||this.DEFAULT_BITRATES;var pt=Object.keys(ut).map((function(ut){return parseInt(ut,10)})),mt=ht.getWidthInPhysicalPixels(window),gt=pt[0],ft=pt[0]-mt,vt=ft;return pt.forEach((function(ut){vt=ut-mt,Math.abs(vt)<=Math.abs(ft)&&(gt=ut,ft=vt)})),1e3*ut[gt]},i.prototype.getBestAssetsByBitrate=function(ut,ht){var pt=this.getPreferredBitrateForDevice(ht),mt=ut[0].bitrate,gt=ut[0].bitrate-pt,ft=gt;return ut.forEach(function(ut){ft=ut.bitrate-pt,Math.abs(ft)<=Math.abs(gt)&&(mt=ut.bitrate,gt=ft)}.bind(this)),ut.filter((function(ut){return ut.bitrate===mt}))},i.prototype.getBestAssetsByFPS=function(ut,ht){var pt=ut[0].fps,mt=ut[0].fps-ht,gt=mt;return ut.forEach(function(ut){gt=ut.fps-ht,Math.abs(gt)<=Math.abs(mt)&&(pt=ut.fps,mt=gt)}.bind(this)),ut.filter((function(ut){return ut.fps===pt}))},i.prototype.getBestAsset=function(ut,ht,pt){if(ut&&ut.length){pt=pt||this.DEFAULT_FPS;var mt=this.getBestAssetsByWidth(ut);if(mt.length<=1)return mt[0];var gt=this.getBestAssetsByBitrate(mt,ht);return gt.length<=1?gt[0]:this.getBestAssetsByFPS(gt,pt)[0]}},i.prototype.getBestAssets=function(ut,ht,pt){var mt=this.getBestAssetsFromManifest(ht,pt);return-1!==pt.formats.indexOf("m3u8")&&this.addM3U8Asset(ut,mt),mt},i.prototype.getBestAssetsFromManifest=function(ut,ht){var pt=[];return ht.formats.forEach(function(mt){var gt=this.getBestAsset(this.getAssetsByFormat(ut,mt),ht.preferredBitrates,ht.preferredFPS);gt&&pt.push(gt)}.bind(this)),pt},i.prototype.addM3U8Asset=function(ut,ht){ht.push({src:ut+".m3u8",format:"m3u8",type:this.dataMapper.VIDEO_TYPE_FORMAT.m3u8})},i.prototype.hasAudio=function(ut){return ut.set.item.some(function(ut){return!!ut.userdata&&ut.userdata.some((function(ut){return!!ut.Audio_Codec}))}.bind(this))},i.prototype.getAssets=function(ut,ht,pt,mt){return isNaN(parseInt(ut,10))||(ut=this.scene7config.scene7videoServer+this.MANIFEST_PATH_PATTERN.replace("[productID]",ut)),this.dataProvider.getManifestData(ut).then(function(mt){var gt=this.dataMapper.map(mt),ft=this.getBestAssets(ut,gt,ht);ft.sort((function(ut,pt){return ht.formats.indexOf(ut.format)-ht.formats.indexOf(pt.format)}));var vt={assets:ft,hasAudio:this.hasAudio(mt)};return"function"==typeof pt&&pt(vt),vt}.bind(this)).fail((function(){"function"==typeof mt&&mt()}))},i})),define("videoPlayer/ViewModel",["ko"],(function(ut){return function e(ht,pt){this.events=ht,this.sources=ut.observableArray(),this.messages=pt,this.isErrorPageVisible=ut.observable(!1),this.isUnsupportedPageVisible=ut.observable(!1),this.refreshButtonClicked=function(){this.events.trigger("refreshButtonClicked")}.bind(this),this.closeButtonClicked=function(){this.events.trigger("closeButtonClicked")}.bind(this)}})),define("utils/fullScreenHelper",["$"],(function(ut){"use strict";var e=function(ut,ht){this.events=ut,this.fullscreenLauncherName=this.getFullscreenLauncherName(ht),this.fullscreenElementName=this.getFullscreenElementName(ht),this.fullscreenCancelName=this.getFullscreenCancelName(ht),this.elementStyle={position:null,top:null,left:null,width:null,height:null,backgroundColor:null,zIndex:null},this.setEventListeners(ht)};return e.prototype.getFullscreenLauncherName=function(ut){return ut.body.requestFullscreen?"requestFullscreen":ut.body.mozRequestFullScreen?"mozRequestFullScreen":ut.body.webkitRequestFullscreen?"webkitRequestFullscreen":ut.body.msRequestFullscreen?"msRequestFullscreen":null},e.prototype.getFullscreenCancelName=function(ut){return ut.exitFullscreen?"exitFullscreen":ut.mozCancelFullScreen?"mozCancelFullScreen":ut.webkitExitFullscreen?"webkitExitFullscreen":null},e.prototype.getFullscreenElementName=function(ut){return"fullscreenElement"in ut?"fullscreenElement":"webkitFullscreenElement"in ut?"webkitFullscreenElement":"msFullscreenElement"in ut?"msFullscreenElement":"mozFullScreenElement"in ut?"mozFullScreenElement":null},e.prototype.getNativeFullScreenElement=function(ut){return this.fullscreenElementName?ut[this.fullscreenElementName]:void 0},e.prototype.getFullScreenElement=function(ut){return this.fullscreenElement?this.fullscreenElement:this.getNativeFullScreenElement(ut)},e.prototype.launchIntoFullscreen=function(ut,ht){if(!this.getFullScreenElement(ut)){if(this.fullscreenLauncherName)return void ht[this.fullscreenLauncherName]();this.fullscreenElement=ht,this.onFullScreenChange(ut)}},e.prototype.exitFullScreen=function(ut,ht){if(!ht||!this.getNativeFullScreenElement(ut)||this.getNativeFullScreenElement(ut)===ht){if(this.fullscreenCancelName)return void(this.getNativeFullScreenElement(ut)&&ut[this.fullscreenCancelName]());if(this.fullscreenElement)try{var pt=this.fullscreenElement.parentNode,mt=this.fullscreenElement.nextSibling;pt.removeChild(this.fullscreenElement),pt.insertBefore(this.fullscreenElement,mt)}catch(ut){}finally{this.onFullScreenChange(ut)}}},e.prototype.onFullScreenChange=function(ut){return this.getFullScreenElement(ut)?void this.events.trigger("fullScreenEntered"):void this.events.trigger("fullScreenExited")},e.prototype.setEventListeners=function(ht){ut(ht).on("webkitfullscreenchange mozfullscreenchange fullscreenchange",this.onFullScreenChange.bind(this,ht))},new e(ut({}),document)})),define("videoPlayer/Controller",["$","utils/fullScreenHelper"],(function(ut,ht){"use strict";var i=function(ht,pt,mt,gt,ft){this.loadedAssets=null,this.unmuteVideosWithAudio=!1,this.loadedSources=void 0,this.progressEvents={0:!1,25:!1,50:!1,75:!1,100:!1},this.assetsProvider=ht,this.events=gt,this.viewModel=mt,this.videoElement=ft,this.params={},this.isError=!1,ut.extend(!0,this.params,pt),this.setEventListeners()};return i.prototype.setEventListeners=function(){var pt=ut(this.videoElement);pt.on("timeupdate",function(){this.onVideoTimeUpdated(),this.videoElement.ended&&this.onVideoPlaybackEnded()}.bind(this)),pt.on("webkitendfullscreen",function(){this.onFullScreenExited()}.bind(this)),pt.on("error",function(ut){var ht=ut.target;if(ht===this.videoElement)this.onVideoError();else if("SOURCE"===ht.tagName){var pt=Array.prototype.indexOf.call(this.videoElement.querySelectorAll("source"),ht);this.onVideoSourceError(pt)}}.bind(this)),pt.on("canplay",function(){this.isError=!1}.bind(this)),this.viewModel.events.on("videoSourceError",function(ut){this.onVideoSourceError(ut.detail.sourceIndex)}.bind(this)),this.viewModel.events.on("refreshButtonClicked",function(){this.onRefreshButtonClicked()}.bind(this)),this.viewModel.events.on("closeButtonClicked",function(){this.onCloseButtonClicked()}.bind(this)),ht.events.on("fullScreenExited",function(){this.onFullScreenExited()}.bind(this)),ht.events.on("fullScreenEntered fullScreenExited",function(){this.onFullScreenChanged()}.bind(this))},i.prototype.onVideoPlaybackEnded=function(){--this.remainingLoopCount>0?(this.videoElement.currentTime=0,this.resetProgressEvents(),this.videoElement.play(),this.events.trigger("loopEnded")):(this.stop(),this.events.trigger("allLoopsEnded"))},i.prototype.onVideoTimeUpdated=function(){var ut=100*this.videoElement.currentTime/this.videoElement.duration;for(var pt in this.progressEvents){var mt=parseInt(pt,10);!this.progressEvents[pt]&&ut>=mt&&(this.progressEvents[pt]=!0,this.events.trigger("progress",{detail:{src:this.videoElement.currentSrc,value:mt,isFullScreen:ht.getFullScreenElement(document)===this.videoElement}}))}},i.prototype.onVideoError=function(){this.isError=!0,this.viewModel.isErrorPageVisible(!0),this.events.trigger("playbackError")},i.prototype.onVideoSourceError=function(ut){ut===this.viewModel.sources().length-1&&this.onVideoError()},i.prototype.onRefreshButtonClicked=function(){this.videoElement.load(),this.start()},i.prototype.onCloseButtonClicked=function(){this.events.trigger("playerExitRequested")},i.prototype.onFullScreenExited=function(){this.params.closeOnFullScreenExited&&this.events.trigger("playerExitRequested")},i.prototype.onFullScreenChanged=function(){if(!this.params.closeOnFullScreenExited&&4===this.videoElement.readyState){var ut=function(){this.videoElement.currentTime<1?(this.videoElement.currentTime+=1,this.videoElement.currentTime-=1):(this.videoElement.currentTime-=1,this.videoElement.currentTime+=1)}.bind(this);this.videoElement.paused?(this.videoElement.play(),ut(),this.videoElement.pause()):(ut(),this.videoElement.pause(),this.videoElement.play())}},i.prototype.hideInfoPages=function(){this.viewModel.isErrorPageVisible(!1)},i.prototype.start=function(ut){this.hideInfoPages(),this.resetProgressEvents(),this.play(this.params.initialLoopCount||1,this.params.startInFullScreen,ut)},i.prototype.play=function(ut,pt,mt){mt&&(this.setAssets(mt.assets),setTimeout(function(){this.videoElement.muted=!this.unmuteVideosWithAudio||!mt.hasAudio}.bind(this),0)),this.videoElement&&this.videoElement.play&&this.loadedAssets&&!this.viewModel.isUnsupportedPageVisible()&&((this.isError||JSON.stringify(this.loadedAssets)!==JSON.stringify(this.viewModel.sources()))&&(this.viewModel.sources(this.loadedAssets),this.videoElement.load()),this.remainingLoopCount=ut,this.videoElement.readyState>0&&(this.videoElement.currentTime=0),pt&&ht.launchIntoFullscreen(document,this.videoElement,!0),this.videoElement.play())},i.prototype.stop=function(){this.videoElement&&this.videoElement.pause&&(ht.exitFullScreen(document,this.videoElement,!0),this.videoElement.pause(),this.videoElement.readyState>0&&(this.videoElement.currentTime=0))},i.prototype.resetProgressEvents=function(){for(var ut in this.progressEvents)this.progressEvents[ut]=!1},i.prototype.hasSupportedAssets=function(ut){var ht=document.createElement("video");return!(!ut||!ht.canPlayType)&&ut.filter((function(ut){return""!==ht.canPlayType(ut.type)})).length>0},i.prototype.setAssets=function(ut,ht){this.loadedAssets=ut,this.viewModel.isUnsupportedPageVisible(!this.hasSupportedAssets(this.loadedAssets))},i.prototype.loadAssets=function(ut,ht,pt,mt){this.loadedAssets=null,this.assetsProvider.getAssets(ut,ht,function(ut){var ht=ut.assets;ht&&ht.length>0?(this.setAssets(ht),"function"==typeof pt&&pt()):"function"==typeof mt&&mt()}.bind(this),(function(){"function"==typeof mt&&mt()}))},i})),define("videoPlayer/component",["ko","$","videoPlayerView","utils/scene7.config","utils/scene7.DataProvider","videoPlayer/DataMapper","videoPlayer/AssetsProvider","videoPlayer/ViewModel","videoPlayer/Controller"],(function(ut,ht,pt,mt,gt,ft,vt,bt,yt){"use strict";return{viewModel:{createViewModel:function(ut,pt){var St=ht({}),wt=ht({}),It=pt.element.querySelector(".asos-media-players .amp-video-player .amp-video-element");ut.messages&&ut.messages.unsupportedHeaderText&&(ut.messages.unsupportedHeaderText=ut.messages.unsupportedHeaderText.replace("[BrowserName]","Your browser"));var xt=new bt(St,ut.messages),Pt=new mt(ut.scene7.imageServer,ut.scene7.videoServer),Tt=new gt(Pt),zt=new ft(Pt),Et=new vt(Pt,Tt,zt),Ct=new yt(Et,ut.player,xt,wt,It),At={start:Ct.start.bind(Ct),stop:Ct.stop.bind(Ct),loadAssets:Ct.loadAssets.bind(Ct),events:Ct.events};return ut.api(At),xt}},template:pt,synchronous:!0}})),define("spinViewerView",[],(function(){return'<div class="asos-media-players amp-relative">\r\n    <div class="amp-spin-viewer amp-relative" data-bind=\'css: { "pannable": isPannable() }\'>\r\n        <div class="amp-spinner amp-relative">\r\n            <div class="amp-page amp-spin">\r\n                <div class="amp-page amp-hint" data-bind="fadeVisible: isHintVisible">\r\n                    <div class="amp-hint-container">\r\n                        <div class="amp-hint-gesture amp-first">\r\n                            <div class="amp-hint-gesture-img sprite drag"></div>\r\n                        </div>\r\n                        <div class="amp-clear"></div>\r\n                        <div class="amp-hint-gesture amp-first">\r\n                            <span data-bind="text: messages.hintDragText"></span>\r\n                        </div>\r\n                        <div class="amp-clear"></div>\r\n                    </div>\r\n                </div>\r\n                <div class="amp-page amp-overlay"></div>\r\n                \x3c!-- ko if: !touchDevice --\x3e\r\n                <span class="sr-only" aria-live="polite" data-bind="text: zoomLevelText"></span>\r\n                <button class="amp-zoom" data-bind="attr: { \'aria-describedby\': hintId }, click: handleClick, event: { keydown: handleKeyDown, keyup: handleKeyUp, blur: handleOnBlur, focus: handleOnFocus }, clickBubble: false">\r\n                    <span class="sprite" data-bind="css: { zoomPlus: zoomPlus, zoomMinus: zoomMinus }"></span>\r\n                </button>\r\n                <p class="zoom-hint" data-bind="text: messages.zoomHint, css: { showHint: showHint }, attr: { id: hintId }" aria-hidden="true"></p>\r\n                \x3c!-- /ko --\x3e\r\n                <div class="amp-page amp-images"></div>\r\n            </div>\r\n            <div class="amp-page amp-loading" data-bind="visible: isLoadingPageVisible">\r\n                <div class="amp-loading-img"></div>\r\n                <span data-bind="text: loadingPercentage() + \'%\'"></span>\r\n            </div>\r\n            <div class="amp-page amp-page-message amp-error-page" data-bind="visible: isErrorPageVisible">\r\n                <div class="amp-message-container">\r\n                    <div class="amp-message-box">\r\n                        <h2 data-bind="html: messages.errorHeaderText"></h2>\r\n                        <p data-bind="html: messages.spinsetErrorMessageText"></p>\r\n                        <div class="amp-button amp-button-black" data-bind="html: messages.refreshButtonText, click: refreshButtonClicked"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>                '})),define("utils/sizeHelper",[],(function(){"use strict";function t(){}return t.prototype.getProportionalSize=function(ut,ht){var pt={width:ut.width,height:ut.height},mt=ht.width/ht.height,gt=ut.width/ut.height;return gt>mt?pt.width=pt.height*mt:mt>gt&&(pt.height=pt.width/mt),pt.width=Math.round(pt.width),pt.height=Math.round(pt.height),pt},t.prototype.resizeCanvas=function(ut,ht){var pt=document.createElement("canvas");pt.width=ht.width,pt.height=ht.height,pt.getContext("2d").drawImage(ut,0,0,ht.width,ht.height),ut.width=ht.width,ut.height=ht.height,ut.getContext("2d").drawImage(pt,0,0)},new t})),define("utils/imageProvider",["$"],(function(ut){"use strict";var e=function(){};return e.prototype.setImage=function(ht,pt,mt,gt,ft,vt){if(ft&&ut.support.cors)return pt.onload=mt,ut.ajax(ht,{success:function(ut){pt.src=ht},error:gt,cache:!vt});if(vt)ht+="&"+(new Date).getTime();else if(pt.complete&&pt.src===ht)return"function"==typeof mt&&mt(),null;return pt.onload=mt,pt.onerror=gt,pt.src=ht,null},new e})),define("utils/scene7.ImageLoader",["$","utils/sizeHelper","utils/imageProvider"],(function(ut,ht,pt){"use strict";var n=function(ut,ht){this.urlQueryStringPattern="wid=[width]&hei=[height]&size=[width],[height]&rect=[startH],[startW],[lengthH],[lengthW]&qlt=[qlt]",this.scene7Config=ut,this.canUseCanvas=document.createElement("canvas").getContext,this.useCors=ht,this.loadRequests=[]};return n.prototype.getPartitionFactors=function(ut,ht){return{horizontal:Math.max(Math.ceil(ut.width/this.scene7Config.maxImageSize.width),ht?this.scene7Config.imageMinPartitionFactors.horizontal:1),vertical:Math.max(Math.ceil(ut.height/this.scene7Config.maxImageSize.height),ht?this.scene7Config.imageMinPartitionFactors.vertical:1)}},n.prototype.getTile=function(ut,ht,mt,gt,ft,vt,bt,yt,St){var wt=new Image,It=this.getTileUrl(ht,mt,gt,ft,vt,bt);return{xhr:pt.setImage(It,wt,function(){wt.onload=null,this.loadRequests[ut].isActive&&"function"==typeof yt&&yt(wt)}.bind(this),function(){wt.onload=null,this.loadRequests[ut].isActive&&"function"==typeof St&&St()}.bind(this),this.useCors),image:wt}},n.prototype.addTile=function(ut,ht,pt,mt,gt,ft,vt,bt,yt,St,wt){this.loadRequests[ut].isActive&&this.loadRequests[ut].tiles.push(this.getTile(ut,pt,mt,ft,vt,bt,yt,function(pt){if(this.loadRequests[ut].isActive){var mt=(this.getTileBox(gt,ft,vt,bt),ht.querySelector('.tile[data-tile-hp="'+ft+'" ][data-tile-vp="'+vt+'"]')),yt=mt.querySelector("img");yt||((yt=new Image).style.width="100%",yt.style.height="100%",mt.appendChild(yt)),yt.src=pt.src,"function"==typeof St&&St()}}.bind(this),wt))},n.prototype.addTiles=function(ut,ht,pt,mt,gt,ft,vt,bt,yt,St){var wt=ut.length,u=function(){0===--wt&&"function"==typeof yt&&yt()};0===wt&&"function"==typeof yt&&yt();for(var It=0;It<ut.length;It++)this.addTile(ht,pt,mt,gt,ft,ut[It].horizontal,ut[It].vertical,vt,bt,u,St)},n.prototype.loadFullImage=function(ut,mt,gt,ft,vt,bt,yt,St,wt){(ft.width>this.scene7Config.maxImageSize.width||ft.height>this.scene7Config.maxImageSize.height)&&(ft=ht.getProportionalSize(this.scene7Config.maxImageSize,ft));var It=gt.querySelector(".fullImageContainer"),xt=gt.querySelector(".partitionedImageContainer"),Pt=gt.querySelector(".fullImageContainer img"),Tt=!1;It||((It=document.createElement("div")).className="fullImageContainer",gt.insertBefore(It,gt.firstChild)),Pt?Tt=!Pt.complete:((Pt=new Image).className="img",Pt.style.width="100%",Pt.style.height="100%",It.appendChild(Pt)),It.style.width=Math.floor(vt.width)+"px",It.style.height=Math.floor(vt.height)+"px",yt&&(It.style.position=yt.position,It.style.top=yt.top,It.style.left=yt.left),It.setAttribute("data-url",mt),It.setAttribute("data-target-qlt",bt),It.setAttribute("data-target-width",Math.floor(ft.width)),It.setAttribute("data-target-height",Math.floor(ft.height)),It.setAttribute("data-output-width",Math.floor(vt.width)),It.setAttribute("data-output-height",Math.floor(vt.height));var zt=this.getTileUrl(mt,ft,0,0,{vertical:1,horizontal:1},bt),Et=pt.setImage(zt,Pt,function(){if(Pt.onload=null,this.loadRequests[ut].isActive){if(xt)for(;xt.lastChild;)xt.removeChild(xt.lastChild);"function"==typeof St&&St()}}.bind(this),function(){Pt.onload=null,this.loadRequests[ut].isActive&&"function"==typeof wt&&wt()}.bind(this),this.useCors,Tt);this.loadRequests[ut].tiles.push({image:Pt,xhr:Et})},n.prototype.loadImageToContainer=function(ut,ht,pt,mt,gt,ft,vt,bt,yt,St,wt){vt=vt||{x:pt.width/2,y:pt.height/2},St=St||"";var It,xt,Pt=this.getPartitionFactors(pt,yt),Tt=(Pt.horizontal,Pt.vertical,{topLeft:{x:0,y:0},bottomRight:{x:mt.width-1,y:mt.height-1}}),zt=this.getTileDataForPoint(vt,mt,Pt),Et=this.loadRequests.push({isActive:!0,tiles:[]})-1,Ct=function(){this.addTiles([zt],Et,At,ut,pt,mt,Pt,St,function(){return!!this.loadRequests[Et].isActive&&void this.addTiles(It,Et,At,ut,pt,mt,Pt,St,function(){return!!this.loadRequests[Et].isActive&&void this.addTiles(xt,Et,At,ut,pt,mt,Pt,St,function(){this.loadRequests[Et].isActive=!1,"function"==typeof gt&&gt()}.bind(this),function(){return!!this.loadRequests[Et].isActive&&void("function"==typeof ft&&ft())}.bind(this))}.bind(this),function(){return!!this.loadRequests[Et].isActive&&void("function"==typeof ft&&ft())}.bind(this))}.bind(this),function(){return!!this.loadRequests[Et].isActive&&void("function"==typeof ft&&ft())}.bind(this))}.bind(this);if((bt=bt||Tt).topLeft.x=Math.max(Math.min(bt.topLeft.x,Tt.bottomRight.x),Tt.topLeft.x),bt.topLeft.y=Math.max(Math.min(bt.topLeft.y,Tt.bottomRight.y),Tt.topLeft.y),bt.bottomRight.x=Math.max(Math.min(bt.bottomRight.x,Tt.bottomRight.x),bt.topLeft.x),bt.bottomRight.y=Math.max(Math.min(bt.bottomRight.y,Tt.bottomRight.y),bt.topLeft.y),It=this.getTilesDataForArea(bt,mt,[zt],zt,Pt),xt=this.getTilesDataForArea(Tt,mt,[zt].concat(It),zt,Pt),!this.canUseCanvas||1===Pt.vertical&&1===Pt.horizontal)this.loadFullImage(Et,ut,ht,pt,mt,St,wt,gt,ft);else{var At=ht.querySelector(".partitionedImageContainer");if(!At){(At=document.createElement("div")).className="partitionedImageContainer",At.style.width=mt.width+"px",At.style.height=mt.height+"px",At.setAttribute("aria-hidden","true"),wt&&(At.style.position=wt.position,At.style.top=wt.top,At.style.left=wt.left);for(var Vt=0;Vt<Pt.vertical;Vt++)for(var _t=0;_t<Pt.horizontal;_t++){var kt=document.createElement("div");kt.className="tile",kt.style.float="left",kt.style.width=100/Pt.horizontal+"%",kt.style.height=100/Pt.vertical+"%",kt.setAttribute("data-tile-hp",_t),kt.setAttribute("data-tile-vp",Vt),At.appendChild(kt)}ht.appendChild(At)}Ct()}return Et},n.prototype.getTilesDataForArea=function(ut,ht,pt,mt,gt){pt=pt||[],mt=mt||{horizontal:0,vertical:0};for(var ft=this.getTileDataForPoint(ut.topLeft,ht,gt),vt=this.getTileDataForPoint(ut.bottomRight,ht,gt),bt=[],l=function(ut){return ut.horizontal===yt&&ut.vertical===St},yt=ft.horizontal;yt<=vt.horizontal;yt++)for(var St=ft.vertical;St<=vt.vertical;St++)0===pt.filter(l).length&&bt.push({horizontal:yt,vertical:St});return bt.sort((function(ut,ht){return Math.sqrt(Math.pow(ut.horizontal-mt.horizontal,2)+Math.pow(ut.vertical-mt.vertical))>Math.sqrt(Math.pow(ht.horizontal-mt.horizontal,2)+Math.pow(ht.vertical-mt.vertical))?1:-1})),bt},n.prototype.getTileDataForPoint=function(ut,ht,pt){for(var mt,gt={horizontal:null,vertical:null},ft=0;ft<pt.horizontal&&null===gt.horizontal;ft++)mt=this.getTileBox(ht,ft,0,pt),ut.x>=mt.left&&ut.x<mt.left+mt.width&&(gt.horizontal=ft);for(var vt=0;vt<pt.vertical&&null===gt.vertical;vt++)mt=this.getTileBox(ht,0,vt,pt),ut.y>=mt.top&&ut.y<mt.top+mt.height&&(gt.vertical=vt);return gt},n.prototype.getTileBox=function(ut,ht,pt,mt){var gt=this.getPartPosition(ht,ut.width,mt.horizontal),ft=this.getPartPosition(pt,ut.height,mt.vertical);return{left:gt,top:ft,width:this.getPartPosition(ht+1,ut.width,mt.horizontal)-gt,height:this.getPartPosition(pt+1,ut.height,mt.vertical)-ft}},n.prototype.getPartPosition=function(ut,ht,pt){return Math.floor(ht*ut/pt)},n.prototype.getTileUrl=function(ut,ht,pt,mt,gt,ft){var vt=this.getTileBox(ht,pt,mt,gt),bt=ut.indexOf("?")>-1?"&":"?";return(ut+bt+this.urlQueryStringPattern).replace(/\[width\]/g,Math.floor(ht.width)).replace(/\[height\]/g,Math.floor(ht.height)).replace("[startH]",Math.floor(vt.left)).replace("[startW]",Math.floor(vt.top)).replace("[lengthH]",Math.floor(vt.width)).replace("[lengthW]",Math.floor(vt.height)).replace("[qlt]",ft)},n.prototype.cancelAllLoadRequests=function(){for(var ut=0;ut<this.loadRequests.length;ut++)this.cancelLoadRequest(ut)},n.prototype.cancelLoadRequest=function(ut){if("number"==typeof ut&&ut<this.loadRequests.length&&this.loadRequests[ut].isActive){var ht=this.loadRequests[ut];if(ht.isActive=!1,ht.tiles.length)for(var pt=ht.tiles[0].image.src,mt=ht.tiles.pop();mt;)mt.xhr?mt.xhr.abort():(mt.image.onload=null,mt.image.src=pt),mt=ht.tiles.pop()}},n})),define("spinViewer/DataProvider",[],(function(){"use strict";var t=function(ut,ht){this.scene7config=ut,this.scene7dataProvider=ht};return t.prototype.mapManifestData=function(ut){var ht={frameUrls:[],maxSize:{width:0,height:0}};if(ut.set.item.length>0){var pt=ut.set.item[0].set?ut.set.item.length:1;if(1===pt)ht.frameUrls[0]=ut.set.item.map(function(ut){return this.scene7config.imageUrlPattern.replace("[assetID]",ut.i.n)}.bind(this)),ht.maxSize.width=parseInt(ut.set.item[0].dx,10),ht.maxSize.height=parseInt(ut.set.item[0].dy,10);else{ut.set.item[0].set.item.length>0&&(ht.maxSize.width=parseInt(ut.set.item[0].set.item[0].dx,10),ht.maxSize.height=parseInt(ut.set.item[0].set.item[0].dy,10));for(var mt=0;pt>mt;mt++)ht.frameUrls[mt]=ut.set.item[mt].set.item.map(function(ut){return this.scene7config.imageUrlPattern.replace("[assetID]",ut.i.n)}.bind(this))}}return ht},t.prototype.getSpinsetDataForImageUrls=function(ut,ht,pt){for(var mt,gt="[baseUrl]?imageset={[imageSet]}&req=set,json",ft=[],vt=0;vt<ut.length;vt++)mt=ut[vt].split("?").shift(),gt=gt.replace("[baseUrl]",mt),ft.push(mt.split("/").pop());return gt=gt.replace("[imageSet]",ft.join(",")),this.scene7dataProvider.getManifestData(gt).then(function(ut){var pt=[];for(Array.isArray(ut.set.item)||(ut.set.item=[ut.set.item]),vt=0;vt<ut.set.item.length;vt++)pt.push(this.mapManifestData({set:{item:[ut.set.item[vt]]}}));return"function"==typeof ht&&ht(pt),pt}.bind(this)).fail((function(){"function"==typeof pt&&pt()}))},t.prototype.getSpinsetDataForImageUrl=function(ut,ht,pt){var mt=(ut=ut.split("?").shift())+"?req=set,json";return this.scene7dataProvider.getManifestData(mt).then(function(ut){return ut.set.item=[ut.set.item],"function"==typeof ht&&ht(ut),ut}.bind(this)).fail((function(){"function"==typeof pt&&pt()}))},t.prototype.getSpinsetDataForProduct=function(ut,ht,pt){var mt=this.scene7config.spinsetManifestFileUrlPattern.replace("[productID]",ut);return this.scene7dataProvider.getManifestData(mt).then(function(ut){var pt=this.mapManifestData(ut);return"function"==typeof ht&&ht(pt),pt}.bind(this)).fail((function(){"function"==typeof pt&&pt()}))},t})),define("spinViewer/AssetsProvider",[],(function(){"use strict";var t=function(ut){this.dataProvider=ut};return t.prototype.getAssets=function(ut,ht,pt){Array.isArray(ut)?this.dataProvider.getSpinsetDataForImageUrls(ut,ht,pt):isNaN(ut)?this.dataProvider.getSpinsetDataForImageUrl(ut,ht,pt):this.dataProvider.getSpinsetDataForProduct(ut,ht,pt)},t})),define("spinViewer/ViewModel",["ko"],(function(ut){return function e(ht,pt){function n(){return Object.keys(gt).filter((function(ut){return gt[ut]}))}function r(ut){Object.keys(gt).forEach((function(ht){ut!==ht&&-1!==ft.indexOf(ht)&&(gt[ht]=!1)}))}var mt,gt={};this.touchDevice="ontouchstart"in document.documentElement,this.events=ht,this.messages=pt,this.isPannable=ut.observable(!1),this.isLoadingPageVisible=ut.observable(!1),this.loadingPercentage=ut.observable(0),this.isErrorPageVisible=ut.observable(!1),this.isHintVisible=ut.observable(!1),this.zoomPlus=ut.observable(!0),this.zoomMinus=ut.observable(!1),this.showHint=ut.observable(!1),this.zoomLevelText=ut.observable(""),this.zoomLevel=ut.observable(0),this.updateLiveRegion=function(ut){clearTimeout(mt),this.zoomLevelText(ut),mt=setTimeout(function(){this.zoomLevelText("")}.bind(this),1e3)}.bind(this),this.hintId=Math.random().toString(36).substring(7),this.refreshButtonClicked=function(){this.events.trigger("refreshButtonClicked")}.bind(this),this.handleOnFocus=function(){this.showHint(!0)}.bind(this),this.handleOnBlur=function(){this.showHint(!1)}.bind(this),this.handleClick=function(){this.events.trigger("zoomCenter")}.bind(this);var ft=["arrowleft","arrowright","arrowup","arrowdown","a","d","w","s"];this.handleKeyDown=function(ut,ht){var pt=ht.key.toLowerCase();if(gt[pt]=!0,-1===ft.indexOf(pt))return!0;var mt=n().filter((function(ut){return-1===ft.indexOf(ut)}));mt.length>0&&r(pt);var vt=function s(){return n().filter((function(ut){return-1!==ft.indexOf(ut)}))}().join(",");this.events.trigger("panImage",vt)},this.handleKeyUp=function(ut,ht){var pt=ht.key.toLowerCase();return gt[pt]=!1,-1!==ft.indexOf(pt)&&r(),!0},this.touchDevice||(this.events.on("canZoomIn",function(){this.zoomPlus(!0),this.zoomMinus(!1),0===this.zoomLevel()?(this.updateLiveRegion(pt.zoomTwoHundred),this.zoomLevel(200)):(this.updateLiveRegion(pt.zoomOneHundred),this.zoomLevel(0))}.bind(this)),this.events.on("cantZoomIn",function(){this.zoomPlus(!1),this.zoomMinus(!0),this.updateLiveRegion(pt.zoomFourHundred),this.zoomLevel(400)}.bind(this)))}})),define("utils/ImageScaler",["$"],(function(ut){"use strict";var e=function(ht){this.options={},ut.extend(!0,this.options,ht)};return e.prototype.getScaledImageSize=function(ut){return{width:this.getScaledImageLength(this.options.baseSize.width,this.options.maxSize.width,ut),height:this.getScaledImageLength(this.options.baseSize.height,this.options.maxSize.height,ut)}},e.prototype.getScaledImageLength=function(ut,ht,pt){return pt?Math.pow(Math.pow(ut,1/pt)*ht/ut,pt):ut},e})),define("utils/ImageZoomer",["ko","$","utils/sizeHelper"],(function(ut,ht,pt){"use strict";var n=function(pt,mt,gt,ft){this.events=ht({}),this.imageLoader=pt,this.inputImageScaler=mt,this.outputImageScaler=gt,this.currentLevel=ut.observable(0),this.options={},ht.extend(!0,this.options,ft),this.options.zoomFactors=[0].concat(this.options.zoomFactors),this.updateCanZoomDummy=ut.observable(!1),this.currLoadRequestId=null,this.currentPosition={x:0,y:0},this.currentSize={width:0,height:0},this.canZoomIn=ut.computed(this.canZoomIn,this),this.canZoomOut=ut.computed(this.canZoomOut,this),this.fullImageStatus=this.FULL_IMAGE_STATUS.NotLoaded};return n.prototype.FULL_IMAGE_STATUS={NotLoaded:0,Loaded:2},n.prototype.init=function(){var ut=ht(this.options.container);this.containerSize={width:this.options.containerSize?this.options.containerSize.width:ut.width(),height:this.options.containerSize?this.options.containerSize.height:ut.height()},this.currentSize=this.getOutputImageSize(this.currentLevel()),this.currentPosition=this.getSanitizedPosition(this.currentPosition,this.currentSize),this.applyPosition(!0),this.updateCanZoomDummy(!this.updateCanZoomDummy())},n.prototype.getNextClosestLevel=function(ut){for(var ht=0,pt=0;pt<=this.options.zoomFactors.length;){var mt=this.currentSize,gt=this.getOutputImageSize(pt);if(ut&&(mt.width===gt.width||mt.height===gt.height)){ht=pt;break}if(mt.width<gt.width||mt.height<gt.height){ht=pt;break}pt++}return ht},n.prototype.resize=function(ut,ht,pt){var mt=this.getNextClosestLevel(!0);this.options.containerSize=ht.containerSize,this.options.outputBaseSize=ht.outputBaseSize,this.outputImageScaler.options.baseSize=ht.imageScalersOptions.outputImageScalerOptions.baseSize,this.outputImageScaler.options.maxSize=ht.imageScalersOptions.outputImageScalerOptions.maxSize,this.init(),ut&&this.zoom((function(){return mt}),null,pt)},n.prototype.canZoomIn=function(){this.updateCanZoomDummy();var ut=this.currentSize,ht=this.getOutputImageSize(this.options.zoomFactors.length-1);return ut.width<ht.width||ut.height<ht.height},n.prototype.canZoomOut=function(){this.updateCanZoomDummy();var ut=this.getOutputImageSize(0),ht=this.currentSize;return ut.width<ht.width||ut.height<ht.height},n.prototype.zoomIn=function(ut,ht,pt){return this.canZoomIn()?void this.zoom(this.getNextClosestLevel.bind(this,!1),ht,pt):ut?void this.zoomReset(pt):void("function"==typeof pt&&pt())},n.prototype.zoomOut=function(ut,ht){return this.canZoomOut()?void this.zoom(function(){return this.currentLevel()-1}.bind(this),ut,ht):void("function"==typeof ht&&ht())},n.prototype.zoomReset=function(ut,ht){if(ht){var pt=this.getOutputImageSize(0),mt=this.getZoomedImageBox(this.currentSize,this.currentPosition,pt);return this.currentSize=mt.size,this.currentPosition=mt.position,this.applyPosition(!0),this.currentLevel(0),void("function"==typeof ut&&setTimeout(ut,0))}this.zoom(function(){return 0}.bind(this),void 0,ut)},n.prototype.loadImage=function(ut,ht,pt,mt,gt,ft,vt,bt,yt,St,wt){ut&&(this.imageLoader.cancelLoadRequest(this.currLoadRequestId),this.currLoadRequestId=this.imageLoader.loadImageToContainer(ut,ht,pt,mt,function(){this.currLoadRequestId=null,"function"==typeof gt&&setTimeout(gt,0)}.bind(this),ft,vt,bt,yt,St,wt))},n.prototype.zoom=function(ut,ht,pt,mt){this.imageLoader.cancelLoadRequest(this.currLoadRequestId),this.fullImageStatus!==this.FULL_IMAGE_STATUS.Loaded&&(this.fullImageStatus=this.FULL_IMAGE_STATUS.NotLoaded);var gt=ut(),ft=(this.getInputImageSize(gt),this.getOutputImageSize(gt)),vt=this.getZoomedImageBox(this.currentSize,this.currentPosition,ft,ht),bt=gt>0;this.currentSize=vt.size,this.currentPosition=vt.position,this.applyPosition(!0),this.fullImageStatus===this.FULL_IMAGE_STATUS.NotLoaded&&bt&&(this.loadImage(this.options.baseUrl,this.options.container,this.getInputImageSize(this.options.zoomFactors.length-1),this.currentSize,function(){this.fullImageStatus=this.FULL_IMAGE_STATUS.Loaded,this.applyPosition(),"function"==typeof pt&&pt()}.bind(this),function(){this.fullImageStatus=this.FULL_IMAGE_STATUS.NotLoaded,"function"==typeof mt&&mt()}.bind(this),vt.focalPointOnSourceImage,this.getVisibleArea(vt.position),!0,this.options.zoomJpgQlt,{position:"absolute",top:Math.floor(this.currentPosition.y)+"px",left:Math.floor(this.currentPosition.x)+"px"}),this.applyPosition(!0)),this.currentLevel(gt),this.updateCanZoomDummy(!this.updateCanZoomDummy()),this.setPartitionedImageVisibility()},n.prototype.getVisibleArea=function(ut){return{topLeft:{x:-ut.x,y:-ut.y},bottomRight:{x:this.containerSize.width-ut.x,y:this.containerSize.height-ut.y}}},n.prototype.getZoomedImageBox=function(ut,ht,pt,mt){mt||(mt={x:this.containerSize.width/2,y:this.containerSize.height/2}),mt=this.getSanitizedPointOnImage(mt,ut);var gt=this.getPointOnOutputImageFromContainer(mt,ut),ft=pt.width-ut.width,vt=pt.height-ut.height,bt=pt.width/ut.width,yt={x:gt.x*bt,y:gt.y*bt},St=ft*(gt.x/ut.width),wt=vt*(gt.y/ut.height);return{size:pt,position:this.getSanitizedPosition({x:ht.x-St,y:ht.y-wt},pt),focalPointOnSourceImage:yt}},n.prototype.moveBy=function(ut){this.canZoomOut()&&(ut.x||ut.y)&&(this.currentPosition=this.getSanitizedPosition({x:this.currentPosition.x+ut.x,y:this.currentPosition.y+ut.y},this.currentSize),this.applyPosition())},n.prototype.applyPosition=function(ut){var pt=ht(this.options.container),mt=Math.floor(this.currentSize.width),gt=Math.floor(this.currentSize.height),ft=pt.find(".fullImageContainer, .partitionedImageContainer");ft.css({position:"absolute",top:Math.floor(this.currentPosition.y)+"px",left:Math.floor(this.currentPosition.x)+"px",width:mt+"px",height:gt+"px"}),ft.attr({"data-output-width":mt,"data-output-height":gt})},n.prototype.getInputImageSize=function(ut){var ht=this.options.zoomFactors[ut],pt=this.inputImageScaler.getScaledImageSize(ht);return pt.width<this.options.outputBaseSize.width||pt.height<this.options.outputBaseSize.height?this.options.outputBaseSize:pt},n.prototype.getOutputImageSize=function(ut){if(0===ut)return this.options.outputBaseSize;var ht=this.options.zoomFactors[ut],pt=this.outputImageScaler.getScaledImageSize(ht);return pt.width<this.options.outputBaseSize.width||pt.height<this.options.outputBaseSize.height?this.options.outputBaseSize:pt},n.prototype.setPlaceholderImage=function(ut){var pt=(this.getInputImageSize(0),this.getOutputImageSize(0)),mt=this.getZoomedImageBox(this.currentSize,this.currentPosition,pt);this.currentSize=mt.size,this.currentPosition=mt.position;var gt=ht(this.options.container).children(),ft=document.createElement("div");ft.className="fullImageContainer",ut.className="img",ut.style.width="100%",ut.style.height="100%",ft.appendChild(ut),this.options.container.appendChild(ft),this.applyPosition(!0),gt.remove()},n.prototype.getBezel=function(ut){return{horizontal:Math.max(this.containerSize.width-Math.floor(ut.width),0)/2,vertical:Math.max(this.containerSize.height-Math.floor(ut.height),0)/2}},n.prototype.getSanitizedPosition=function(ut,ht){var pt=this.getBezel(ht),mt={x:Math.floor(ut.x),y:Math.floor(ut.y)};return mt.x=Math.min(mt.x,pt.horizontal),mt.y=Math.min(mt.y,pt.vertical),mt.x=Math.max(mt.x,this.containerSize.width-Math.floor(ht.width)-pt.horizontal),mt.y=Math.max(mt.y,this.containerSize.height-Math.floor(ht.height)-pt.vertical),mt},n.prototype.getSanitizedPointOnImage=function(ut,ht){var pt=this.getBezel(ht),mt={x:ut.x,y:ut.y};return mt.x=Math.max(mt.x,pt.horizontal),mt.y=Math.max(mt.y,pt.vertical),mt.x=Math.min(mt.x,this.containerSize.width-pt.horizontal),mt.y=Math.min(mt.y,this.containerSize.height-pt.vertical),mt},n.prototype.getPointOnOutputImageFromContainer=function(ut){return{x:ut.x-this.currentPosition.x,y:ut.y-this.currentPosition.y}},n.prototype.getCurrentImageDisplaySize=function(){return this.currentSize},n.prototype.scale=function(ut,ht,pt,mt){pt||(pt={x:0,y:0});var gt={width:Math.max(ut.width*ht,this.options.outputBaseSize.width),height:Math.max(ut.height*ht,this.options.outputBaseSize.height)};if(!mt){var ft=this.getOutputImageSize(this.options.zoomFactors.length-1);gt.width=Math.min(ft.width,gt.width),gt.height=Math.min(ft.height,gt.height)}var vt=this.getZoomedImageBox(this.currentSize,this.currentPosition,gt,pt);this.currentPosition=vt.position,this.currentSize=vt.size,this.applyPosition(!0),this.updateCanZoomDummy(!this.updateCanZoomDummy()),this.setPartitionedImageVisibility()},n.prototype.setPartitionedImageVisibility=function(){return this.options.container.querySelector(".partitionedImageContainer")?this.currentSize.width===this.options.outputBaseSize.width?void(this.options.container.querySelector(".partitionedImageContainer").style.display="none"):void(this.options.container.querySelector(".partitionedImageContainer").style.display="block"):void 0},n})),function(ut,ht,pt,mt){"use strict";function s(ut,ht,pt){return setTimeout(c(ut,pt),ht)}function r(ut,ht,pt){return!!Array.isArray(ut)&&(o(ut,pt[ht],pt),!0)}function o(ut,ht,pt){var gt;if(ut)if(ut.forEach)ut.forEach(ht,pt);else if(ut.length!==mt)for(gt=0;gt<ut.length;)ht.call(pt,ut[gt],gt,ut),gt++;else for(gt in ut)ut.hasOwnProperty(gt)&&ht.call(pt,ut[gt],gt,ut)}function a(ht,pt,mt){var gt="DEPRECATED METHOD: "+pt+"\n"+mt+" AT \n";return function(){var pt=new Error("get-stack-trace"),mt=pt&&pt.stack?pt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ft=ut.console&&(ut.console.warn||ut.console.log);return ft&&ft.call(ut.console,gt,mt),ht.apply(this,arguments)}}function l(ut,ht,pt){var mt,ft=ht.prototype;(mt=ut.prototype=Object.create(ft)).constructor=ut,mt._super=ft,pt&&gt(mt,pt)}function c(ut,ht){return function(){return ut.apply(ht,arguments)}}function d(ut,ht){return typeof ut==bt?ut.apply(ht&&ht[0]||mt,ht):ut}function u(ut,ht){return ut===mt?ht:ut}function h(ut,ht,pt){o(f(ht),(function(ht){ut.addEventListener(ht,pt,!1)}))}function p(ut,ht,pt){o(f(ht),(function(ht){ut.removeEventListener(ht,pt,!1)}))}function m(ut,ht){for(;ut;){if(ut==ht)return!0;ut=ut.parentNode}return!1}function g(ut,ht){return ut.indexOf(ht)>-1}function f(ut){return ut.trim().split(/\s+/g)}function v(ut,ht,pt){if(ut.indexOf&&!pt)return ut.indexOf(ht);for(var mt=0;mt<ut.length;){if(pt&&ut[mt][pt]==ht||!pt&&ut[mt]===ht)return mt;mt++}return-1}function b(ut){return Array.prototype.slice.call(ut,0)}function y(ut,ht,pt){for(var mt=[],gt=[],ft=0;ft<ut.length;){var vt=ht?ut[ft][ht]:ut[ft];v(gt,vt)<0&&mt.push(ut[ft]),gt[ft]=vt,ft++}return pt&&(mt=ht?mt.sort((function(ut,pt){return ut[ht]>pt[ht]})):mt.sort()),mt}function S(ut,ht){for(var pt,gt,vt=ht[0].toUpperCase()+ht.slice(1),bt=0;bt<ft.length;){if((gt=(pt=ft[bt])?pt+vt:ht)in ut)return gt;bt++}return mt}function I(ht){var pt=ht.ownerDocument||ht;return pt.defaultView||pt.parentWindow||ut}function P(ut,ht){var pt=this;this.manager=ut,this.callback=ht,this.element=ut.element,this.target=ut.options.inputTarget,this.domHandler=function(ht){d(ut.options.enable,[ut])&&pt.handler(ht)},this.init()}function T(ut,ht,pt){var mt=pt.pointers.length,gt=pt.changedPointers.length,ft=ht&_t&&mt-gt==0,vt=ht&(Mt|Dt)&&mt-gt==0;pt.isFirst=!!ft,pt.isFinal=!!vt,ft&&(ut.session={}),pt.eventType=ht,function z(ut,ht){var pt=ut.session,mt=ht.pointers,gt=mt.length;pt.firstInput||(pt.firstInput=A(ht)),gt>1&&!pt.firstMultiple?pt.firstMultiple=A(ht):1===gt&&(pt.firstMultiple=!1);var ft=pt.firstInput,vt=pt.firstMultiple,bt=vt?vt.center:ft.center,yt=ht.center=V(mt);ht.timeStamp=wt(),ht.deltaTime=ht.timeStamp-ft.timeStamp,ht.angle=D(bt,yt),ht.distance=M(bt,yt),function E(ut,ht){var pt=ht.center,mt=ut.offsetDelta||{},gt=ut.prevDelta||{},ft=ut.prevInput||{};ht.eventType!==_t&&ft.eventType!==Mt||(gt=ut.prevDelta={x:ft.deltaX||0,y:ft.deltaY||0},mt=ut.offsetDelta={x:pt.x,y:pt.y}),ht.deltaX=gt.x+(pt.x-mt.x),ht.deltaY=gt.y+(pt.y-mt.y)}(pt,ht),ht.offsetDirection=k(ht.deltaX,ht.deltaY);var It=_(ht.deltaTime,ht.deltaX,ht.deltaY);ht.overallVelocityX=It.x,ht.overallVelocityY=It.y,ht.overallVelocity=St(It.x)>St(It.y)?It.x:It.y,ht.scale=vt?function R(ut,ht){return M(ht[0],ht[1],$t)/M(ut[0],ut[1],$t)}(vt.pointers,mt):1,ht.rotation=vt?function L(ut,ht){return D(ht[1],ht[0],$t)+D(ut[1],ut[0],$t)}(vt.pointers,mt):0,ht.maxPointers=pt.prevInput?ht.pointers.length>pt.prevInput.maxPointers?ht.pointers.length:pt.prevInput.maxPointers:ht.pointers.length,C(pt,ht);var xt=ut.element;m(ht.srcEvent.target,xt)&&(xt=ht.srcEvent.target),ht.target=xt}(ut,pt),ut.emit("hammer.input",pt),ut.recognize(pt),ut.session.prevInput=pt}function C(ut,ht){var pt,gt,ft,vt,bt=ut.lastInterval||ht,yt=ht.timeStamp-bt.timeStamp;if(ht.eventType!=Dt&&(yt>Vt||bt.velocity===mt)){var wt=ht.deltaX-bt.deltaX,It=ht.deltaY-bt.deltaY,xt=_(yt,wt,It);gt=xt.x,ft=xt.y,pt=St(xt.x)>St(xt.y)?xt.x:xt.y,vt=k(wt,It),ut.lastInterval=ht}else pt=bt.velocity,gt=bt.velocityX,ft=bt.velocityY,vt=bt.direction;ht.velocity=pt,ht.velocityX=gt,ht.velocityY=ft,ht.direction=vt}function A(ut){for(var ht=[],pt=0;pt<ut.pointers.length;)ht[pt]={clientX:yt(ut.pointers[pt].clientX),clientY:yt(ut.pointers[pt].clientY)},pt++;return{timeStamp:wt(),pointers:ht,center:V(ht),deltaX:ut.deltaX,deltaY:ut.deltaY}}function V(ut){var ht=ut.length;if(1===ht)return{x:yt(ut[0].clientX),y:yt(ut[0].clientY)};for(var pt=0,mt=0,gt=0;ht>gt;)pt+=ut[gt].clientX,mt+=ut[gt].clientY,gt++;return{x:yt(pt/ht),y:yt(mt/ht)}}function _(ut,ht,pt){return{x:ht/ut||0,y:pt/ut||0}}function k(ut,ht){return ut===ht?Lt:St(ut)>=St(ht)?0>ut?Rt:Ft:0>ht?Ot:Ut}function M(ut,ht,pt){pt||(pt=Gt);var mt=ht[pt[0]]-ut[pt[0]],gt=ht[pt[1]]-ut[pt[1]];return Math.sqrt(mt*mt+gt*gt)}function D(ut,ht,pt){pt||(pt=Gt);var mt=ht[pt[0]]-ut[pt[0]],gt=ht[pt[1]]-ut[pt[1]];return 180*Math.atan2(gt,mt)/Math.PI}function F(){this.evEl=Zt,this.evWin=Ht,this.pressed=!1,P.apply(this,arguments)}function O(){this.evEl=Yt,this.evWin=Jt,P.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function U(){this.evTarget=Kt,this.evWin=te,this.started=!1,P.apply(this,arguments)}function B(ut,ht){var pt=b(ut.touches),mt=b(ut.changedTouches);return ht&(Mt|Dt)&&(pt=y(pt.concat(mt),"identifier",!0)),[pt,mt]}function N(){this.evTarget=ie,this.targetIds={},P.apply(this,arguments)}function G(ut,ht){var pt=b(ut.touches),mt=this.targetIds;if(ht&(_t|kt)&&1===pt.length)return mt[pt[0].identifier]=!0,[pt,pt];var gt,ft,vt=b(ut.changedTouches),bt=[],yt=this.target;if(ft=pt.filter((function(ut){return m(ut.target,yt)})),ht===_t)for(gt=0;gt<ft.length;)mt[ft[gt].identifier]=!0,gt++;for(gt=0;gt<vt.length;)mt[vt[gt].identifier]&&bt.push(vt[gt]),ht&(Mt|Dt)&&delete mt[vt[gt].identifier],gt++;return bt.length?[y(ft.concat(bt),"identifier",!0),bt]:void 0}function q(){P.apply(this,arguments);var ut=c(this.handler,this);this.touch=new N(this.manager,ut),this.mouse=new F(this.manager,ut),this.primaryTouch=null,this.lastTouches=[]}function $(ut,ht){ut&_t?(this.primaryTouch=ht.changedPointers[0].identifier,W.call(this,ht)):ut&(Mt|Dt)&&W.call(this,ht)}function W(ut){var ht=ut.changedPointers[0];if(ht.identifier===this.primaryTouch){var pt={x:ht.clientX,y:ht.clientY};this.lastTouches.push(pt);var mt=this.lastTouches;setTimeout((function(){var ut=mt.indexOf(pt);ut>-1&&mt.splice(ut,1)}),ne)}}function H(ut){for(var ht=ut.srcEvent.clientX,pt=ut.srcEvent.clientY,mt=0;mt<this.lastTouches.length;mt++){var gt=this.lastTouches[mt],ft=Math.abs(ht-gt.x),vt=Math.abs(pt-gt.y);if(se>=ft&&se>=vt)return!0}return!1}function Z(ut,ht){this.manager=ut,this.set(ht)}function X(ut){this.options=gt({},this.defaults,ut||{}),this.id=function w(){return Pt++}(),this.manager=null,this.options.enable=u(this.options.enable,!0),this.state=me,this.simultaneous={},this.requireFail=[]}function J(ut){return ut&ye?"cancel":ut&ve?"end":ut&fe?"move":ut&ge?"start":""}function Q(ut){return ut==Ut?"down":ut==Ot?"up":ut==Rt?"left":ut==Ft?"right":""}function K(ut,ht){var pt=ht.manager;return pt?pt.get(ut):ut}function tt(){X.apply(this,arguments)}function et(){tt.apply(this,arguments),this.pX=null,this.pY=null}function it(){tt.apply(this,arguments)}function nt(){X.apply(this,arguments),this._timer=null,this._input=null}function st(){tt.apply(this,arguments)}function rt(){tt.apply(this,arguments)}function ot(){X.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function at(ut,ht){return(ht=ht||{}).recognizers=u(ht.recognizers,at.defaults.preset),new lt(ut,ht)}function lt(ut,ht){this.options=gt({},at.defaults,ht||{}),this.options.inputTarget=this.options.inputTarget||ut,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=ut,this.input=function x(ut){var ht=ut.options.inputClass;return new(ht||(zt?O:Et?N:Tt?q:F))(ut,T)}(this),this.touchAction=new Z(this,this.options.touchAction),ct(this,!0),o(this.options.recognizers,(function(ut){var ht=this.add(new ut[0](ut[1]));ut[2]&&ht.recognizeWith(ut[2]),ut[3]&&ht.requireFailure(ut[3])}),this)}function ct(ut,ht){var pt,mt=ut.element;mt.style&&(o(ut.options.cssProps,(function(gt,ft){pt=S(mt.style,ft),ht?(ut.oldCssProps[pt]=mt.style[pt],mt.style[pt]=gt):mt.style[pt]=ut.oldCssProps[pt]||""})),ht||(ut.oldCssProps={}))}function dt(ut,pt){var mt=ht.createEvent("Event");mt.initEvent(ut,!0,!0),mt.gesture=pt,pt.target.dispatchEvent(mt)}var gt,ft=["","webkit","Moz","MS","ms","o"],vt=ht.createElement("div"),bt="function",yt=Math.round,St=Math.abs,wt=Date.now;gt="function"!=typeof Object.assign?function(ut){if(ut===mt||null===ut)throw new TypeError("Cannot convert undefined or null to object");for(var ht=Object(ut),pt=1;pt<arguments.length;pt++){var gt=arguments[pt];if(gt!==mt&&null!==gt)for(var ft in gt)gt.hasOwnProperty(ft)&&(ht[ft]=gt[ft])}return ht}:Object.assign;var It=a((function(ut,ht,pt){for(var gt=Object.keys(ht),ft=0;ft<gt.length;)(!pt||pt&&ut[gt[ft]]===mt)&&(ut[gt[ft]]=ht[gt[ft]]),ft++;return ut}),"extend","Use `assign`."),xt=a((function(ut,ht){return It(ut,ht,!0)}),"merge","Use `assign`."),Pt=1,Tt="ontouchstart"in ut,zt=S(ut,"PointerEvent")!==mt,Et=Tt&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Ct="touch",At="mouse",Vt=25,_t=1,kt=2,Mt=4,Dt=8,Lt=1,Rt=2,Ft=4,Ot=8,Ut=16,Bt=Rt|Ft,Nt=Ot|Ut,qt=Bt|Nt,Gt=["x","y"],$t=["clientX","clientY"];P.prototype={handler:function(){},init:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(I(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(I(this.element),this.evWin,this.domHandler)}};var Wt={mousedown:_t,mousemove:kt,mouseup:Mt},Zt="mousedown",Ht="mousemove mouseup";l(F,P,{handler:function(ut){var ht=Wt[ut.type];ht&_t&&0===ut.button&&(this.pressed=!0),ht&kt&&1!==ut.which&&(ht=Mt),this.pressed&&(ht&Mt&&(this.pressed=!1),this.callback(this.manager,ht,{pointers:[ut],changedPointers:[ut],pointerType:At,srcEvent:ut}))}});var jt={pointerdown:_t,pointermove:kt,pointerup:Mt,pointercancel:Dt,pointerout:Dt},Xt={2:Ct,3:"pen",4:At,5:"kinect"},Yt="pointerdown",Jt="pointermove pointerup pointercancel";ut.MSPointerEvent&&!ut.PointerEvent&&(Yt="MSPointerDown",Jt="MSPointerMove MSPointerUp MSPointerCancel"),l(O,P,{handler:function(ut){var ht=this.store,pt=!1,mt=ut.type.toLowerCase().replace("ms",""),gt=jt[mt],ft=Xt[ut.pointerType]||ut.pointerType,vt=ft==Ct,bt=v(ht,ut.pointerId,"pointerId");gt&_t&&(0===ut.button||vt)?0>bt&&(ht.push(ut),bt=ht.length-1):gt&(Mt|Dt)&&(pt=!0),0>bt||(ht[bt]=ut,this.callback(this.manager,gt,{pointers:ht,changedPointers:[ut],pointerType:ft,srcEvent:ut}),pt&&ht.splice(bt,1))}});var Qt={touchstart:_t,touchmove:kt,touchend:Mt,touchcancel:Dt},Kt="touchstart",te="touchstart touchmove touchend touchcancel";l(U,P,{handler:function(ut){var ht=Qt[ut.type];if(ht===_t&&(this.started=!0),this.started){var pt=B.call(this,ut,ht);ht&(Mt|Dt)&&pt[0].length-pt[1].length==0&&(this.started=!1),this.callback(this.manager,ht,{pointers:pt[0],changedPointers:pt[1],pointerType:Ct,srcEvent:ut})}}});var ee={touchstart:_t,touchmove:kt,touchend:Mt,touchcancel:Dt},ie="touchstart touchmove touchend touchcancel";l(N,P,{handler:function(ut){var ht=ee[ut.type],pt=G.call(this,ut,ht);pt&&this.callback(this.manager,ht,{pointers:pt[0],changedPointers:pt[1],pointerType:Ct,srcEvent:ut})}});var ne=2500,se=25;l(q,P,{handler:function(ut,ht,pt){var mt=pt.pointerType==Ct,gt=pt.pointerType==At;if(!(gt&&pt.sourceCapabilities&&pt.sourceCapabilities.firesTouchEvents)){if(mt)$.call(this,ht,pt);else if(gt&&H.call(this,pt))return;this.callback(ut,ht,pt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var re=S(vt.style,"touchAction"),oe=re!==mt,ae="compute",ce="auto",le="manipulation",de="none",ue="pan-x",he="pan-y",pe=function Y(){if(!oe)return!1;var ht={},pt=ut.CSS&&ut.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(mt){ht[mt]=!pt||ut.CSS.supports("touch-action",mt)})),ht}();Z.prototype={set:function(ut){ut==ae&&(ut=this.compute()),oe&&this.manager.element.style&&pe[ut]&&(this.manager.element.style[re]=ut),this.actions=ut.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var ut=[];return o(this.manager.recognizers,(function(ht){d(ht.options.enable,[ht])&&(ut=ut.concat(ht.getTouchAction()))})),function j(ut){if(g(ut,de))return de;var ht=g(ut,ue),pt=g(ut,he);return ht&&pt?de:ht||pt?ht?ue:he:g(ut,le)?le:ce}(ut.join(" "))},preventDefaults:function(ut){var ht=ut.srcEvent,pt=ut.offsetDirection;if(!this.manager.session.prevented){var mt=this.actions,gt=g(mt,de)&&!pe[de],ft=g(mt,he)&&!pe[he],vt=g(mt,ue)&&!pe[ue];if(gt){var bt=1===ut.pointers.length,yt=ut.distance<2,St=ut.deltaTime<250;if(bt&&yt&&St)return}return vt&&ft?void 0:gt||ft&&pt&Bt||vt&&pt&Nt?this.preventSrc(ht):void 0}ht.preventDefault()},preventSrc:function(ut){this.manager.session.prevented=!0,ut.preventDefault()}};var me=1,ge=2,fe=4,ve=8,be=ve,ye=16,Se=32;X.prototype={defaults:{},set:function(ut){return gt(this.options,ut),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(ut){if(r(ut,"recognizeWith",this))return this;var ht=this.simultaneous;return ht[(ut=K(ut,this)).id]||(ht[ut.id]=ut,ut.recognizeWith(this)),this},dropRecognizeWith:function(ut){return r(ut,"dropRecognizeWith",this)||(ut=K(ut,this),delete this.simultaneous[ut.id]),this},requireFailure:function(ut){if(r(ut,"requireFailure",this))return this;var ht=this.requireFail;return-1===v(ht,ut=K(ut,this))&&(ht.push(ut),ut.requireFailure(this)),this},dropRequireFailure:function(ut){if(r(ut,"dropRequireFailure",this))return this;ut=K(ut,this);var ht=v(this.requireFail,ut);return ht>-1&&this.requireFail.splice(ht,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(ut){return!!this.simultaneous[ut.id]},emit:function(ut){function e(pt){ht.manager.emit(pt,ut)}var ht=this,pt=this.state;ve>pt&&e(ht.options.event+J(pt)),e(ht.options.event),ut.additionalEvent&&e(ut.additionalEvent),pt>=ve&&e(ht.options.event+J(pt))},tryEmit:function(ut){return this.canEmit()?this.emit(ut):void(this.state=Se)},canEmit:function(){for(var ut=0;ut<this.requireFail.length;){if(!(this.requireFail[ut].state&(Se|me)))return!1;ut++}return!0},recognize:function(ut){var ht=gt({},ut);return d(this.options.enable,[this,ht])?(this.state&(be|ye|Se)&&(this.state=me),this.state=this.process(ht),void(this.state&(ge|fe|ve|ye)&&this.tryEmit(ht))):(this.reset(),void(this.state=Se))},process:function(ut){},getTouchAction:function(){},reset:function(){}},l(tt,X,{defaults:{pointers:1},attrTest:function(ut){var ht=this.options.pointers;return 0===ht||ut.pointers.length===ht},process:function(ut){var ht=this.state,pt=ut.eventType,mt=ht&(ge|fe),gt=this.attrTest(ut);return mt&&(pt&Dt||!gt)?ht|ye:mt||gt?pt&Mt?ht|ve:ht&ge?ht|fe:ge:Se}}),l(et,tt,{defaults:{event:"pan",threshold:10,pointers:1,direction:qt},getTouchAction:function(){var ut=this.options.direction,ht=[];return ut&Bt&&ht.push(he),ut&Nt&&ht.push(ue),ht},directionTest:function(ut){var ht=this.options,pt=!0,mt=ut.distance,gt=ut.direction,ft=ut.deltaX,vt=ut.deltaY;return gt&ht.direction||(ht.direction&Bt?(gt=0===ft?Lt:0>ft?Rt:Ft,pt=ft!=this.pX,mt=Math.abs(ut.deltaX)):(gt=0===vt?Lt:0>vt?Ot:Ut,pt=vt!=this.pY,mt=Math.abs(ut.deltaY))),ut.direction=gt,pt&&mt>ht.threshold&&gt&ht.direction},attrTest:function(ut){return tt.prototype.attrTest.call(this,ut)&&(this.state&ge||!(this.state&ge)&&this.directionTest(ut))},emit:function(ut){this.pX=ut.deltaX,this.pY=ut.deltaY;var ht=Q(ut.direction);ht&&(ut.additionalEvent=this.options.event+ht),this._super.emit.call(this,ut)}}),l(it,tt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[de]},attrTest:function(ut){return this._super.attrTest.call(this,ut)&&(Math.abs(ut.scale-1)>this.options.threshold||this.state&ge)},emit:function(ut){if(1!==ut.scale){var ht=ut.scale<1?"in":"out";ut.additionalEvent=this.options.event+ht}this._super.emit.call(this,ut)}}),l(nt,X,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ce]},process:function(ut){var ht=this.options,pt=ut.pointers.length===ht.pointers,mt=ut.distance<ht.threshold,gt=ut.deltaTime>ht.time;if(this._input=ut,!mt||!pt||ut.eventType&(Mt|Dt)&&!gt)this.reset();else if(ut.eventType&_t)this.reset(),this._timer=s((function(){this.state=be,this.tryEmit()}),ht.time,this);else if(ut.eventType&Mt)return be;return Se},reset:function(){clearTimeout(this._timer)},emit:function(ut){this.state===be&&(ut&&ut.eventType&Mt?this.manager.emit(this.options.event+"up",ut):(this._input.timeStamp=wt(),this.manager.emit(this.options.event,this._input)))}}),l(st,tt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[de]},attrTest:function(ut){return this._super.attrTest.call(this,ut)&&(Math.abs(ut.rotation)>this.options.threshold||this.state&ge)}}),l(rt,tt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Bt|Nt,pointers:1},getTouchAction:function(){return et.prototype.getTouchAction.call(this)},attrTest:function(ut){var ht,pt=this.options.direction;return pt&(Bt|Nt)?ht=ut.overallVelocity:pt&Bt?ht=ut.overallVelocityX:pt&Nt&&(ht=ut.overallVelocityY),this._super.attrTest.call(this,ut)&&pt&ut.offsetDirection&&ut.distance>this.options.threshold&&ut.maxPointers==this.options.pointers&&St(ht)>this.options.velocity&&ut.eventType&Mt},emit:function(ut){var ht=Q(ut.offsetDirection);ht&&this.manager.emit(this.options.event+ht,ut),this.manager.emit(this.options.event,ut)}}),l(ot,X,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[le]},process:function(ut){var ht=this.options,pt=ut.pointers.length===ht.pointers,mt=ut.distance<ht.threshold,gt=ut.deltaTime<ht.time;if(this.reset(),ut.eventType&_t&&0===this.count)return this.failTimeout();if(mt&&gt&&pt){if(ut.eventType!=Mt)return this.failTimeout();var ft=!this.pTime||ut.timeStamp-this.pTime<ht.interval,vt=!this.pCenter||M(this.pCenter,ut.center)<ht.posThreshold;if(this.pTime=ut.timeStamp,this.pCenter=ut.center,vt&&ft?this.count+=1:this.count=1,this._input=ut,0===this.count%ht.taps)return this.hasRequireFailures()?(this._timer=s((function(){this.state=be,this.tryEmit()}),ht.interval,this),ge):be}return Se},failTimeout:function(){return this._timer=s((function(){this.state=Se}),this.options.interval,this),Se},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==be&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),at.VERSION="2.0.7",at.defaults={domEvents:!1,touchAction:ae,enable:!0,inputTarget:null,inputClass:null,preset:[[st,{enable:!1}],[it,{enable:!1},["rotate"]],[rt,{direction:Bt}],[et,{direction:Bt},["swipe"]],[ot],[ot,{event:"doubletap",taps:2},["tap"]],[nt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};lt.prototype={set:function(ut){return gt(this.options,ut),ut.touchAction&&this.touchAction.update(),ut.inputTarget&&(this.input.destroy(),this.input.target=ut.inputTarget,this.input.init()),this},stop:function(ut){this.session.stopped=ut?2:1},recognize:function(ut){var ht=this.session;if(!ht.stopped){this.touchAction.preventDefaults(ut);var pt,mt=this.recognizers,gt=ht.curRecognizer;(!gt||gt&&gt.state&be)&&(gt=ht.curRecognizer=null);for(var ft=0;ft<mt.length;)pt=mt[ft],2===ht.stopped||gt&&pt!=gt&&!pt.canRecognizeWith(gt)?pt.reset():pt.recognize(ut),!gt&&pt.state&(ge|fe|ve)&&(gt=ht.curRecognizer=pt),ft++}},get:function(ut){if(ut instanceof X)return ut;for(var ht=this.recognizers,pt=0;pt<ht.length;pt++)if(ht[pt].options.event==ut)return ht[pt];return null},add:function(ut){if(r(ut,"add",this))return this;var ht=this.get(ut.options.event);return ht&&this.remove(ht),this.recognizers.push(ut),ut.manager=this,this.touchAction.update(),ut},remove:function(ut){if(r(ut,"remove",this))return this;if(ut=this.get(ut)){var ht=this.recognizers,pt=v(ht,ut);-1!==pt&&(ht.splice(pt,1),this.touchAction.update())}return this},on:function(ut,ht){if(ut!==mt&&ht!==mt){var pt=this.handlers;return o(f(ut),(function(ut){pt[ut]=pt[ut]||[],pt[ut].push(ht)})),this}},off:function(ut,ht){if(ut!==mt){var pt=this.handlers;return o(f(ut),(function(ut){ht?pt[ut]&&pt[ut].splice(v(pt[ut],ht),1):delete pt[ut]})),this}},emit:function(ut,ht){this.options.domEvents&&dt(ut,ht);var pt=this.handlers[ut]&&this.handlers[ut].slice();if(pt&&pt.length){ht.type=ut,ht.preventDefault=function(){ht.srcEvent.preventDefault()};for(var mt=0;mt<pt.length;)pt[mt](ht),mt++}},destroy:function(){this.element&&ct(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},gt(at,{INPUT_START:_t,INPUT_MOVE:kt,INPUT_END:Mt,INPUT_CANCEL:Dt,STATE_POSSIBLE:me,STATE_BEGAN:ge,STATE_CHANGED:fe,STATE_ENDED:ve,STATE_RECOGNIZED:be,STATE_CANCELLED:ye,STATE_FAILED:Se,DIRECTION_NONE:Lt,DIRECTION_LEFT:Rt,DIRECTION_RIGHT:Ft,DIRECTION_UP:Ot,DIRECTION_DOWN:Ut,DIRECTION_HORIZONTAL:Bt,DIRECTION_VERTICAL:Nt,DIRECTION_ALL:qt,Manager:lt,Input:P,TouchAction:Z,TouchInput:N,MouseInput:F,PointerEventInput:O,TouchMouseInput:q,SingleTouchInput:U,Recognizer:X,AttrRecognizer:tt,Tap:ot,Pan:et,Swipe:rt,Pinch:it,Rotate:st,Press:nt,on:h,off:p,each:o,merge:xt,extend:It,assign:gt,inherit:l,bindFn:c,prefixed:S}),(void 0!==ut?ut:"undefined"!=typeof self?self:{}).Hammer=at,"function"==typeof define&&define.amd?define("hammer",[],(function(){return at})):"undefined"!=typeof module&&module.exports?module.exports=at:ut.Hammer=at}(window,document),define("spinViewer/Controller",["ko","$","utils/deviceHelper","utils/sizeHelper","utils/ImageScaler","utils/ImageZoomer","hammer"],(function(ut,ht,pt,mt,gt,ft,vt){"use strict";var a=function(mt,gt,ft,vt,bt,yt){this.assetsProvider=mt,this.imageLoader=gt,this.loadedAssets=null,this.events=yt,this.containers=bt,this.params={showHint:!1,spinSpeed:1,maxPixelRatio:1.5,hintDisplayTime:3e3,preloadingTimeout:0,handleLoadingErrors:!0,framesCachingQueueInterval:35,useInitialAnimation:!1,animationFramesCount:-1,animationIntervalStart:40,animationIntervalPeak:5},this.viewModel=vt,this.updateZoomerDummy=ut.observable(!1),this.initState=this.INIT_STATE.NotInitialized,this.frames=[[]],this.lastInitArguments=null,this.currentRowIndex=ut.observable(0),this.currentFrameIndex=ut.observable(),ht.extend(!0,this.params,ft),this.params.devicePixelRatio=Math.min(pt.getDevicePixelRatio(this.containers.window),this.params.maxPixelRatio),this.isPannable=ut.computed(this.isPannable,this),this.hasError=ut.observable(!1),this.getCurrentZoomer=ut.computed(this.getCurrentZoomer,this),this.setEventListeners(),this.viewModel.isPannable(this.isPannable())};return a.prototype.MIN_GESTURE_RECOGNIZE_DISTANCE=10,a.prototype.INIT_STATE={NotInitialized:0,Initializing:1,Initialized:2},a.prototype.init=function(ut,ht){return this.initState!==this.INIT_STATE.Initializing?(ht&&ht.initImage&&(ht=ht.initImage.image),this.lastInitArguments=arguments,this.updateSpinContainerSize(),this.targetSize=this.getContainerInitialTargetSize(),ht?(this.setInitialImage(ht),this.initState=this.INIT_STATE.Initialized,void this.showFrame(0,0,!0)):this.initState!==this.INIT_STATE.Initialized?(this.initState=this.INIT_STATE.Initializing,void this.preloadImages(0,0)):void this.resize(function(){this.showFrame(0,0,!0)}.bind(this))):void 0},a.prototype.isVisible=function(){return"none"!==window.getComputedStyle(this.containers.spin).display},a.prototype.setInitialImage=function(ut){var ht=this.getZoomer(0,0);ht.options.baseUrl=this.loadedAssets.frameUrls[0][0],ht.zoomReset(null,!0),ut.className="img",ht.setPlaceholderImage(ut)},a.prototype.updateSpinContainerSize=function(){this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.spinContainerSize={width:this.spinContainerRect.width,height:this.spinContainerRect.height}},a.prototype.isPannable=function(){var ut=this.getCurrentZoomer();return ut&&ut.canZoomOut()},a.prototype.zoomIn=function(ut,ht,pt){var mt=this.getCurrentZoomer();return mt&&(ut||mt.canZoomIn())?(this.events.trigger("zoomedIn"),this.imageLoader.cancelAllLoadRequests(),mt.zoomIn(ut,ht,pt),void(mt.canZoomIn()?this.viewModel.events.trigger("canZoomIn"):this.viewModel.events.trigger("cantZoomIn"))):void("function"==typeof pt&&pt())},a.prototype.zoomReset=function(ut){var ht=this.getCurrentZoomer();return ht?(this.imageLoader.cancelAllLoadRequests(),void ht.zoomReset(ut)):void("function"==typeof ut&&ut())},a.prototype.zoomOut=function(ut,ht){var pt=this.getCurrentZoomer();return pt&&pt.canZoomOut()?(this.imageLoader.cancelAllLoadRequests(),void pt.zoomOut(focalPointInContainer,ht)):void("function"==typeof ht&&ht())},a.prototype.getEventPositionRelativeToTarget=function(ut,ht){return{x:(ut.center?ut.center.x:ut.clientX)-ht.left,y:(ut.center?ut.center.y:ut.clientY)-ht.top}},a.prototype.resize=function(ut){if(this.isVisible()){var ht=this.frames.length*this.frames[0].length,n=function(){--ht||"function"==typeof ut&&ut()};if(this.updateSpinContainerSize(),!ht)return void("function"==typeof ut&&ut());for(var pt=0;pt<this.frames.length;pt++)for(var mt=0;mt<this.frames[pt].length;mt++){var gt=this.getOutputBaseSize();this.frames[pt][mt].resize(!0,{containerSize:this.spinContainerSize,outputBaseSize:gt,imageScalersOptions:this.getImageScalersOptions(gt)},n)}}},a.prototype.animationIntervalEasing=function(ut,ht){var pt=this.params.animationIntervalPeak-this.params.animationIntervalStart,mt=(Math.sin(2*Math.PI*ut/ht-Math.PI/2)+1)/2;return this.params.animationIntervalStart+mt*pt},a.prototype.refresh=function(){this.init.apply(this,this.lastInitArguments)},a.prototype.animateSpin=function(ut,ht,pt,mt){var gt=ut,ft=0,vt=ht>ut?ht-ut:this.frames[this.currentRowIndex()].length+ht-ut,bt=function(){return this.showFrame(this.currentRowIndex(),gt,!0),gt===ht?void("function"==typeof mt&&mt()):(gt++,ft++,gt>=this.frames[this.currentRowIndex()].length&&(gt=0),void setTimeout(bt,pt(ft,vt)))}.bind(this);bt()},a.prototype.getZoomer=function(ut,ht){var pt,mt=this.getOutputBaseSize(),gt=this.getImageScalersOptions(mt);return this.frames[ut]=this.frames[ut]||[],(pt=this.frames[ut][ht])||(pt=this.createZoomer(),this.frames[ut][ht]=pt,this.updateZoomerDummy(!this.updateZoomerDummy())),pt.inputImageScaler.options.baseSize=gt.inputImageScalerOptions.baseSize,pt.inputImageScaler.options.maxSize=gt.inputImageScalerOptions.maxSize,pt.resize(!1,{containerSize:this.spinContainerSize,outputBaseSize:mt,imageScalersOptions:gt}),pt},a.prototype.getImageScalersOptions=function(ut){var ht={width:this.loadedAssets.maxSize.width,height:this.loadedAssets.maxSize.height};return{inputImageScalerOptions:{baseSize:{width:Math.min(this.loadedAssets.maxSize.width,this.targetSize.width*this.params.devicePixelRatio),height:Math.min(this.loadedAssets.maxSize.height,this.targetSize.height*this.params.devicePixelRatio)},maxSize:ht},outputImageScalerOptions:{baseSize:ut,maxSize:{width:Math.max(ut.width,this.loadedAssets.maxSize.width/this.params.devicePixelRatio),height:Math.max(ut.height,this.loadedAssets.maxSize.height/this.params.devicePixelRatio)}}}},a.prototype.createZoomer=function(ut){var ht=document.createElement("div"),pt=this.getOutputBaseSize(),mt=this.getImageScalersOptions(pt),vt=new gt(mt.inputImageScalerOptions),bt=new gt(mt.outputImageScalerOptions);return ht.className="amp-frame",new ft(this.imageLoader,vt,bt,{baseUrl:ut,zoomFactors:this.params.zoomFactors,container:ht,containerSize:this.spinContainerSize,outputBaseSize:pt,devicePixelRatio:this.params.devicePixelRatio,baseJpgQlt:this.params.baseJpgQlt,zoomJpgQlt:this.params.zoomJpgQlt})},a.prototype.getContainerInitialTargetSize=function(){var ut=mt.getProportionalSize({width:this.spinContainerSize.width,height:this.spinContainerSize.height},this.loadedAssets.maxSize);return this.params.initialSize&&(ut.width=this.params.initialSize.width,ut.height=this.loadedAssets.maxSize.height*ut.width/this.loadedAssets.maxSize.width),ut},a.prototype.getOutputBaseSize=function(){return mt.getProportionalSize(this.spinContainerSize,this.loadedAssets.maxSize)},a.prototype.preloadImages=function(ut,ht,pt){this.viewModel.loadingPercentage(0),this.hasError(!1);var mt,gt=null,ft=!1,vt=[],bt=null,c=function(){ft=!0,yt--,St--,yt||(clearTimeout(gt),gt=null,clearInterval(bt),bt=null,this.hasError(!0),this.initState=this.INIT_STATE.NotInitialized)},u=function(ut,ht,pt){pt.applyPosition(),yt--,mt>1&&vt.push({rowIndex:ut,frameIndex:ht})},h=function(ut,ht,pt){pt.loadImage(this.loadedAssets.frameUrls[ut][ht],pt.options.container,pt.inputImageScaler.options.baseSize,pt.options.outputBaseSize,u.bind(this,ut,ht,pt),this.params.handleLoadingErrors?c.bind(this):u.bind(this,ut,ht,pt),null,null,1===mt,this.params.baseJpgQlt)},yt=mt=this.loadedAssets.frameUrls.length*this.loadedAssets.frameUrls[0].length,St=mt;mt>1&&this.viewModel.isLoadingPageVisible(!0),bt=setInterval(function(ut){var ht=vt.pop();return ht?(this.showFrame(ht.rowIndex,ht.frameIndex,!0),St--,void this.viewModel.loadingPercentage(Math.floor(100*(mt-St)/mt))):void(yt||(clearInterval(bt),bt=null,"function"==typeof ut&&ut()))}.bind(this,function(){if(clearTimeout(gt),gt=null,this.hasError(ft),ft)return this.events.trigger("allImagesLoaded",!1),void(this.initState=this.INIT_STATE.NotInitialized);this.events.trigger("allImagesLoaded",!0);var pt=this.frames[ut].length,mt=ht,vt=(pt+ht-1)%pt;return!this.params.showHint||window.sessionStorage&&window.sessionStorage.getItem("spinViewerHintDisplayed")||(this.viewModel.isHintVisible(!0),setTimeout(function(){this.viewModel.isHintVisible(!1),window.sessionStorage&&window.sessionStorage.setItem("spinViewerHintDisplayed",!0)}.bind(this),this.params.hintDisplayTime)),this.params.useInitialAnimation?(mt=(pt+ht-this.params.animationFramesCount)%pt,vt=ht,this.showFrame(ut,mt,!0),this.viewModel.isLoadingPageVisible(!1),void this.animateSpin(mt,vt,this.animationIntervalEasing.bind(this),function(){this.initState=this.INIT_STATE.Initialized,this.showFrame(ut,ht,!0)}.bind(this))):(this.viewModel.isLoadingPageVisible(!1),this.initState=this.INIT_STATE.Initialized,void this.showFrame(ut,ht,!0))}.bind(this)),this.params.framesCachingQueueInterval),this.imageLoader.cancelAllLoadRequests(),this.params.handleLoadingErrors&&this.params.preloadingTimeout&&(gt=setTimeout(function(){clearInterval(bt),bt=null,this.imageLoader.cancelAllLoadRequests(),this.hasError(!0),this.initState=this.INIT_STATE.NotInitialized}.bind(this),this.params.preloadingTimeout));for(var wt=0;wt<this.loadedAssets.frameUrls.length;wt++)for(var It=0;It<this.loadedAssets.frameUrls[wt].length;It++){var xt=this.getZoomer(wt,It);xt.options.baseUrl=this.loadedAssets.frameUrls[wt][It],h.call(this,wt,It,xt)}},a.prototype.getCurrentZoomer=function(){return this.updateZoomerDummy(),this.currentRowIndex()<this.frames.length&&this.frames[this.currentRowIndex()]&&this.currentFrameIndex()<this.frames[this.currentRowIndex()].length?this.frames[this.currentRowIndex()][this.currentFrameIndex()]:null},a.prototype.getCurrentFrame=function(){return{rowIndex:this.currentRowIndex(),frameIndex:this.currentFrameIndex(),zoomer:this.getCurrentZoomer()}},a.prototype.showFrame=function(ut,ht,pt){if((pt||this.initState===this.INIT_STATE.Initialized)&&(ut!=this.currentRowIndex()||ht!=this.currentFrameIndex())){this.currentRowIndex(ut),this.currentFrameIndex(ht);for(var mt=this.getCurrentFrame();this.containers.images.lastChild;)this.containers.images.removeChild(this.containers.images.lastChild);this.containers.images.appendChild(mt.zoomer.options.container),this.events.trigger("frameShown",mt)}},a.prototype.loadFullImage=function(ut,ht){ut.fullImageStatus=ut.FULL_IMAGE_STATUS.Loading;var pt=(ut.getCurrentImageDisplaySize(),ut.getOutputImageSize(ut.options.zoomFactors.length-1)),mt=ut.getZoomedImageBox(ut.currentSize,ut.currentPosition,pt,ht);ut.loadImage(this.loadedAssets.frameUrls[this.currentRowIndex()][this.currentFrameIndex()],ut.options.container,ut.getInputImageSize(ut.options.zoomFactors.length-1),pt,(function(){ut.applyPosition(),ut.fullImageStatus=ut.FULL_IMAGE_STATUS.Loaded}),(function(){ut.fullImageStatus!==ut.FULL_IMAGE_STATUS.Loaded&&(ut.fullImageStatus=ut.FULL_IMAGE_STATUS.NotLoaded)}),mt.focalPointOnSourceImage,null,!0,this.params.zoomJpgQlt)},a.prototype.zoomCenter=function(){this.zoomIn(!0)},a.prototype.setEventListeners=function(){this.viewModel.events.on("refreshButtonClicked",function(){this.refresh(),this.events.trigger("refreshButtonClicked")}.bind(this)),this.viewModel.events.on("zoomCenter",this.zoomCenter.bind(this)),ht(window).resize(function(){if(this.initState===this.INIT_STATE.Initialized){var ut=this.containers.spin.getBoundingClientRect();ut.width===this.spinContainerRect.width&&ut.height===this.spinContainerRect.height||this.resize()}}.bind(this));var ut,pt,mt=new vt(this.containers.root),gt=mt.get("pinch"),ft=mt.get("pan"),bt=mt.get("doubletap"),yt=0,St=0,wt=null,It=function(ut,ht){var pt=this.getCurrentZoomer();if(pt.canZoomOut())pt.moveBy(ht);else if(this.frames.length>1||this.frames[this.currentRowIndex()].length>1){var mt=this.getRemoteRowIndex(yt,this.getMatrixShift(this.params.reverseVerticalDirection,ut.y,this.frames.length,this.spinContainerSize.height)),gt=this.getRemoteFrameIndex(St,this.getMatrixShift(this.params.reverseHorizontalDirection,ut.x,this.frames[0].length,this.spinContainerSize.width));mt===this.currentRowIndex()&&gt===this.currentFrameIndex()||(this.events.trigger("spun"),this.showFrame(mt,gt))}}.bind(this),xt=function(){ft.set({threshold:this.MIN_GESTURE_RECOGNIZE_DISTANCE}),ft.set({direction:this.isPannable()?vt.DIRECTION_ALL:vt.DIRECTION_HORIZONTAL}),ft.set({enable:this.isPannable()||this.frames[this.currentRowIndex()].length>1})}.bind(this),Pt=function(ht){if(this.initState===this.INIT_STATE.Initialized){ht.preventDefault(),ht.stopPropagation();var pt=this.getCurrentZoomer(),mt=1+.1*(ht.detail<0||ht.wheelDelta>0?1:-1);this.spinContainerRect=this.containers.spin.getBoundingClientRect(),pt.fullImageStatus===pt.FULL_IMAGE_STATUS.NotLoaded&&this.loadFullImage.call(this,pt,this.getEventPositionRelativeToTarget(ht,this.spinContainerRect)),ut=pt.getCurrentImageDisplaySize(),pt.scale(ut,mt,this.getEventPositionRelativeToTarget(ht,this.spinContainerRect),false)}}.bind(this);xt(),bt.set({interval:500,time:500,threshold:this.MIN_GESTURE_RECOGNIZE_DISTANCE,posThreshold:100});this.viewModel.events.on("panImage",(function(ut,ht){var pt={x:0,y:0},mt=ht.split(",");-1===mt.indexOf("arrowup")&&-1===mt.indexOf("w")||(pt.y=30),-1===mt.indexOf("arrowdown")&&-1===mt.indexOf("s")||(pt.y=-30),-1===mt.indexOf("arrowleft")&&-1===mt.indexOf("a")||(pt.x=30),-1===mt.indexOf("arrowright")&&-1===mt.indexOf("d")||(pt.x=-30),It(pt,pt)})),this.isPannable.subscribe(function(ut){this.viewModel.isPannable(ut),xt()}.bind(this)),mt.on("hammer.input",function(ut){return ut.distance<this.MIN_GESTURE_RECOGNIZE_DISTANCE&&(wt=null),null===wt&&ut.distance>=this.MIN_GESTURE_RECOGNIZE_DISTANCE&&(wt=!this.isPannable()&&1===ut.pointers.length&&(ut.direction&vt.DIRECTION_VERTICAL)>0),wt?void mt.stop():void gt.set({enable:ut.pointers.length>1})}.bind(this)),mt.on("tap",function(ut){this.initState===this.INIT_STATE.Initialized&&"mouse"===ut.pointerType&&(ut.target&&-1===ut.target.className.indexOf("amp-overlay")||(this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.zoomIn(!0,this.getEventPositionRelativeToTarget(ut,this.spinContainerRect))))}.bind(this)),mt.on("doubletap",function(ut){ut.preventDefault(),ut.srcEvent.stopPropagation(),this.initState===this.INIT_STATE.Initialized&&"mouse"!==ut.pointerType&&(this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.zoomIn(!0,this.getEventPositionRelativeToTarget(ut,this.spinContainerRect)))}.bind(this)),mt.on("panstart",function(ut){pt=ut,St=this.currentFrameIndex(),yt=this.currentRowIndex()}.bind(this)),mt.on("pan",function(ut){if(this.initState===this.INIT_STATE.Initialized){ut.preventDefault(),ut.srcEvent.stopPropagation(),St=St||this.currentFrameIndex(),yt=yt||this.currentRowIndex(),pt=pt||ut;var ht={x:ut.deltaX-pt.deltaX,y:ut.deltaY-pt.deltaY},mt={x:ut.deltaX,y:ut.deltaY};pt=ut,It(mt,ht)}}.bind(this)),mt.on("panend",function(ut){pt=ut,St=this.currentFrameIndex(),yt=this.currentRowIndex()}.bind(this)),mt.on("pinchstart",function(ht){if(this.initState===this.INIT_STATE.Initialized){var pt=this.getCurrentZoomer();pt.fullImageStatus===pt.FULL_IMAGE_STATUS.NotLoaded&&(this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.loadFullImage.call(this,pt,this.getEventPositionRelativeToTarget(ht,this.spinContainerRect))),ut=pt.getCurrentImageDisplaySize(),ft.set({enable:!1})}}.bind(this)),mt.on("pinch",function(ht){ht.preventDefault(),ht.srcEvent.stopPropagation(),this.initState===this.INIT_STATE.Initialized&&this.getCurrentZoomer().scale(ut,ht.scale,this.getEventPositionRelativeToTarget(ht,this.spinContainerRect),false)}.bind(this)),mt.on("pinchend",function(){this.initState===this.INIT_STATE.Initialized&&xt()}.bind(this)),this.containers.spin.addEventListener("mousewheel",Pt),this.containers.spin.addEventListener("DOMMouseScroll",Pt),this.hasError.subscribe(function(ut){this.viewModel.isErrorPageVisible(ut)}.bind(this))},a.prototype.getMatrixShift=function(ut,ht,pt,mt){var gt=(ut?-1:1)*this.params.spinSpeed*ht*pt/mt;return gt>0?Math.floor(gt):Math.ceil(gt)},a.prototype.getRemoteFrameIndex=function(ut,ht){var pt=(ut+ht)%this.frames[0].length;return 0>pt&&(pt=this.frames[0].length+pt),pt},a.prototype.getRemoteRowIndex=function(ut,ht){var pt=(ut+ht)%this.frames.length;return 0>pt&&(pt=this.frames.length+pt),pt},a.prototype.loadAssets=function(ut,ht,pt){this.initState=this.INIT_STATE.NotInitialized,this.loadedAssets=null,this.assetsProvider.getAssets(ut,function(ut){return ut.maxSize.width&&ut.maxSize.height?(this.loadedAssets=ut,void("function"==typeof ht&&ht(ut))):void("function"==typeof pt&&pt())}.bind(this),pt)},a.prototype.setAssets=function(ut){this.initState=this.INIT_STATE.NotInitialized,this.loadedAssets=ut},a})),define("bindings/fadeVisible",["ko","$"],(function(ut,ht){"use strict";function i(){}return i.prototype.init=function(pt,mt){var gt=mt();ht(pt).toggle(ut.unwrap(gt))},i.prototype.update=function(pt,mt){var gt=mt();ut.unwrap(gt)?ht(pt).fadeIn():ht(pt).fadeOut()},ut.bindingHandlers.fadeVisible=new i,ut.bindingHandlers.fadeVisible})),define("spinViewer/component",["$","spinViewerView","utils/scene7.config","utils/scene7.ImageLoader","utils/scene7.DataProvider","spinViewer/DataProvider","spinViewer/AssetsProvider","spinViewer/ViewModel","spinViewer/Controller","bindings/fadeVisible"],(function(ut,ht,pt,mt,gt,ft,vt,bt,yt){"use strict";return{viewModel:{createViewModel:function(ht,St){var wt=ut({}),It=ut({}),xt={window,root:St.element,spin:St.element.querySelector(".amp-spin"),images:St.element.querySelector(".amp-spin .amp-images")},Pt=new pt(ht.scene7.imageServer,ht.scene7.videoServer),Tt=new gt(Pt),zt=new ft(Pt,Tt),Et=new vt(zt),Ct=new mt(Pt,ht.viewer.useCors),At=new bt(wt,ht.messages);ht.viewer.zoomFactors.container&&(ht.viewer.zoomFactors=ht.viewer.zoomFactors.container);var Vt=new yt(Et,Ct,ht.viewer,At,xt,It),_t={setAssets:Vt.setAssets.bind(Vt),loadAssets:Vt.loadAssets.bind(Vt),init:Vt.init.bind(Vt),zoomIn:Vt.zoomIn.bind(Vt),zoomOut:Vt.zoomOut.bind(Vt),zoomReset:Vt.zoomReset.bind(Vt),events:Vt.events};return ht.api(_t),At}},template:ht,synchronous:!0}})),define("Asos.Utils.MediaPlayers",["videoPlayer/component","videoPlayer/DataMapper","videoPlayer/AssetsProvider","spinViewer/component","utils/scene7.config","utils/scene7.DataProvider","spinViewer/DataProvider","spinViewer/AssetsProvider"],(function(ut,ht,pt,mt,gt,ft,vt,bt){"use strict";function l(){this.videoPlayer=ut,this.spinViewer=mt}return l.prototype.getSpinViewerAssetsProvider=function(ut){var ht=new gt(ut),pt=new ft(ht),mt=new vt(ht,pt);return new bt(mt)},l.prototype.getVideoPlayerAssetsProvider=function(ut){var mt=new gt(null,ut),vt=new ft(mt),bt=new ht(mt);return new pt(mt,vt,bt)},new l})),define("ProductUtils/Window",[],(function(){return window})),define("ProductUtils/MergeJson",[],(function(){return function(ut,ht){var pt=JSON.parse(JSON.stringify(ut)),mt=JSON.parse(JSON.stringify(ht));for(var gt in mt)try{pt[gt]=mt[gt]}catch(ut){console.warn("couldn't merge JSONS: "+ut)}return pt}})),define("ProductUtils/StockPrice",["ProductUtils/Window","ProductUtils/MergeJson"],(function(ut,ht){return function(){this.getStockPrice=function(ht,pt,mt){null!=ht&&ut.asos.pdp.getStockPrice().then(function(ut){this.successRequest.call(this,ut,{callback:pt,products:ht})}.bind(this)).catch(mt)},this.successRequest=function(ut,ht){var pt=this.combineData(ht.products,ut);ht.callback(pt)},this.combineData=function(ut,ht){var pt,mt=void 0!==ut.products,gt=this.createVariantMap(ut,mt);if(mt){for(var ft={},vt=0;vt<ut.products.length;vt++)ft[ut.products[vt].id]=vt;var bt=[];bt.length=ht.length;for(var yt=0;yt<ht.length;yt++){bt[ft[ht[yt].productId]]=ht[yt]}for(var St=0;St<ut.products.length;St++)ut.products[St]=this.mergeJsons(ut.products[St],bt[St]);pt=ut;for(var wt=[],It=0;It<ut.products.length;It++)wt.push(this.mapVariantData(ut.products[It],pt.products[It],gt[ut.products[It].productId]));return pt.products=wt,pt}return gt=gt[ut.id],pt=this.mergeJsons(ut,ht[0]),this.mapVariantData(ut,pt,gt)},this.mapVariantData=function(ut,ht,pt){for(var mt=!1,gt=0;gt<ut.variants.length;gt++)mt||(mt=ht.variants[gt].isInStock),ht.variants[gt].variantId=ht.variants[gt].id,ht.variants[gt].sku=pt[ht.variants[gt].id].sku,ht.variants[gt].size=pt[ht.variants[gt].id].size,ht.variants[gt].sizeOrder=pt[ht.variants[gt].id].sizeOrder,ht.variants[gt].colour=pt[ht.variants[gt].id].colour,ht.variants[gt].colourWayId=pt[ht.variants[gt].id].colourWayId,ht.variants[gt].isPrimary=pt[ht.variants[gt].id].isPrimary,ht.variants[gt].sizeId=pt[ht.variants[gt].id].sizeId,ht.variants[gt].productImage=void 0!==ut.productImage?ut.productImage.url:"";return ht.isInStock=mt,ht},this.createVariantMap=function(ut,ht){var pt=[];if(ht)for(var mt=0;mt<ut.products.length;mt++)pt[ut.products[mt].id]=[],pt=this.loopVariants(ut.products[mt],pt);else pt[ut.id]=[],pt=this.loopVariants(ut,pt);return pt},this.loopVariants=function(ut,ht){for(var pt=0;pt<ut.variants.length;pt++){var mt=ut.variants[pt].variantId;ht[ut.id][mt]=ut.variants[pt]}return ht},this.mergeJsons=ht}})),define("Providers/SdkProvider",["Promise"],(function(ut){function e(ht){return function(){return new ut((function(ut){var i=function(){ut(window.asos.sdk[ht])};window.asos.sdk&&window.asos.sdk[ht]?i():window.asos.eventBus.once(ht+"-sdk-ready",(function(){i()}))}))}}return{getSavedItems:e("savedItems"),getBag:e("bag"),getIdentity:e("identity"),getFeatures:e("features")}})),define("Providers/FeaturesProvider",["Providers/SdkProvider","Promise"],(function(ut,ht){var pt,mt,gt=new ht((function(ut){pt=ut})),ft=new ht((function(ut){mt=ut})),u=function(){return{isEnabled:function(){return!1},getVariables:function(){return null}}},h=function(){},p=function(){};return ut.getFeatures().then((function(ut){ut.onReady().then((function(){u=ut.getFeature,h=ut.track,p=ut.activate,pt(),setTimeout(mt,0)}))})),{getFeature:function i(ut,ht,pt){return u(ut,ht,pt)},onReady:function r(){return gt},onComplete:function o(){return ft},track:function n(ut,ht,pt){return h(ut,ht,pt)},activate:function s(ut,ht,pt){return p(ut,ht,pt)}}})),define("ProductUtils/NewRelicLogger",["PageConfig"],(function(ut){var e=function(){var ht;this.init=function(ut){ht=ut},this.logError=function(pt,mt){window.newrelic&&(mt.pageVersion=ut.version,mt.pageUrl=window.location.href,mt.pageType=ht,mt.codebase="Knockout",window.newrelic.addPageAction(pt.message,mt))}};return e.prototype.PAGE_TYPE={PRD:"ProductPage.SingleProduct",GRP:"ProductPage.MixAndMatch"},e.prototype.ERROR_TYPE={AjaxError:"Ajax Error",ParseError:"Parse Error",UserActionFailed:"User Action Failed"},new e})),define("asos-web-seo-path",[],(function(){"use strict";function t(ht){return Object.values(ht).map((function(ht){var pt=ut.find((function(ut){return ut[0]===ht}));return pt?pt[1]:ht})).join("")}function i(ut){return function e(ut){return Object.values(ut.normalize("NFD")).map((function(ut){return ut.match(/[0-9A-Za-z \-/.]/g)?ut:void 0})).join("").normalize("NFC")}(ut.trim()).replace(/\//g,"-").replace(/\s/g,"-").replace(/-+/g,"-").replace(/\./g,"").replace(/^-/,"").replace(/-$/,"").toLowerCase()}function n(ut,ht,pt){var mt=ut,gt=ht;return pt&&"ru-ru"===pt.toLowerCase()&&(mt=t(ut),gt=t(ht)),{romanProductName:mt,romanBrandName:gt}}var ut=[["","A"],["","a"],["","B"],["","b"],["","V"],["","v"],["","G"],["","g"],["","D"],["","d"],["","E"],["","e"],["","Yo"],["","yo"],["","Zh"],["","zh"],["","Z"],["","z"],["","I"],["","i"],["","J"],["","j"],["","K"],["","k"],["","L"],["","l"],["","M"],["","m"],["","N"],["","n"],["","O"],["","o"],["","P"],["","p"],["","R"],["","r"],["","S"],["","s"],["","T"],["","t"],["","U"],["","u"],["","F"],["","f"],["","H"],["","h"],["","Ts"],["","ts"],["","Ch"],["","ch"],["","Sh"],["","sh"],["","Sch"],["","sch"],["",""],["",""],["","Y"],["","y"],["",""],["",""],["","E"],["","e"],["","Yu"],["","yu"],["","Ya"],["","ya"]];return function s(ut){return function(ht,pt,mt){if("function"!=typeof"".normalize)return"";if(!ht)return ut&&ut.error("createSeoPath - productName was not passed in"),"";var gt=n(ht,pt,mt),ft=gt.romanProductName,vt=gt.romanBrandName,bt=i(ft),yt=i(vt);return"".concat(yt,"/").concat(bt)}}})),define("ProductUtils/UrlUtils",["PageConfig","ProductUtils/NewRelicLogger","asos-web-seo-path","ProductUtils/Window"],(function(ut,ht,pt,mt){return function(){var gt=pt();this.formatUrl=function(ut){return ut?"http"===ut.substring(0,4)?ut.replace("http:","https:"):"/"===ut.substring(0,1)?ut:"//"+ut:ut},this.getUrlParam=function(ut,ht){ht||(ht=mt.location.href),ut=ut.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var pt=new RegExp("[\\?&]"+ut+"=([^&#]*)","i").exec(ht);return null===pt?null:decodeURIComponent(pt[1].replace(/\+/g," "))},this.getVariantFromUrl=function(ut,ht){var pt=ut.split("?")[0];if((pt=null!=pt?pt.split("/prd/"):null).length>0&&(pt=parseInt(pt[1])),pt||(pt=parseInt(this.getUrlParam("iid",ut))),!pt)return null;for(var mt=0;mt<ht.length;mt++)if(ht[mt].variantId===pt)return ht[mt];return null},this.getProductUrl=function(pt,mt,ft){if(!ft)return ht.logError(new TypeError("ProductId was not provided")),ut.siteDomain;var vt="";return pt&&mt?vt="/"+gt(pt,mt,ut.language):ht.logError(new TypeError("missing brand name or product name, returning generic link"),{productId:ft}),ut.siteDomain+vt+"/prd/"+ft}}})),define("ProductUtils/FeatureTracking",["Providers/FeaturesProvider","ProductUtils/UrlUtils","ProductUtils/Window"],(function(ut,ht,pt){return{onPageLoadStart:function(){var mt,gt=pt.asos.pdp.config.featuresCtaTracking,ft=(new ht).getUrlParam("ctaRef"),vt=ft&&ft.split("_")[0];vt&&gt&&gt.map((function(ut){vt.toLowerCase()!==ut.matchCta.toLowerCase()||mt||(mt=ut)})),mt&&ut.onReady().then((function(){ut.track(mt.trackingKey)}))}}})),define("Models/VariantDecorator",[],(function(){function t(ut,ht){for(var pt=0;pt<ut.length;pt++)if(ht(ut[pt]))return pt}return function(){this.getData=function(ut,ht){ht=void 0!==ht&&ht;var pt=void 0!==ut.productImage?[ut.productImage]:ut.images,mt={};if(pt)for(var gt=0;gt<pt.length;gt++){var ft=pt[gt];if(ft.colourWayId)void 0===mt[ft.colourWayId]&&(mt[ft.colourWayId]=ft.colour)}var vt=ut.variants;vt.sort((function(ut,ht){var pt=ht.colour.localeCompare(ut.colour);return 0===pt?ht.sizeOrder-ut.sizeOrder:pt}));for(var bt,yt=ut.productId?ut.productId:ut.id,St=vt.length,wt={},It={productId:yt,colours:[],isInStock:!1,price:ut.productPrice},xt=0;St--;){var Pt=vt[St];Pt.productId=yt,Pt.ratings=ut.ratings,Pt.brandName=ut.brandName,void 0===It.hasDifferentPrices&&(ht||Pt.isInStock)&&(void 0===bt?bt=Pt.price.current:Pt.price.current.value!==bt.value&&(It.hasDifferentPrices=!0));var Tt=Pt.isInStock;Pt.colourName=mt[Pt.colourWayId];var zt=wt[Pt.colour];void 0===zt&&(It.colours.push({colour:Pt.colour,colourName:Pt.colourName,variants:[],colourWayId:Pt.colourWayId}),zt=wt[Pt.colour]={index:xt,variantsInStock:0},xt++),Tt&&(zt.variantsInStock++,It.isInStock||(It.isInStock=!0)),It.colours[zt.index].variants.push(Pt),(void 0===zt.lowestPrice||zt.lowestPrice.value>Pt.price.current.value)&&(zt.lowestPrice=Pt.price.current)}for(var Et=Object.keys(wt),Ct=Et.length-1;Ct>=0;Ct--){var At=Et[Ct],Vt=wt[At],_t=t(It.colours,(function(ut){return ut.colour===At}));ht||0!==Vt.variantsInStock?It.colours[_t].price=Vt.lowestPrice:It.colours.splice(_t,1)}return It}}})),define("text",{load:function(ut){throw new Error("Dynamic load not allowed: "+ut)}}),define("text!Components/product-image/product-image.html",[],(function(){return'<div class="grid-row">\n  <img class="mix-match-item-thumbnail" data-bind="attr: {\n        alt: \'\',\n        src: source,\n        srcset: sourceSet,\n        sizes: size + \'px\'\n        }" />\n</div>\n'})),define("ProductUtils/ImagePresets",["PageConfig"],(function(ut){return{getImageSource:function e(ht,pt,mt){return ht+ut.imagePresets[mt][pt]},getImageSourceSet:function i(ht,pt,mt){return Object.keys(ut.imagePresets[mt]).filter((function(ut){return ut>=pt})).map((function(pt){return ht+ut.imagePresets[mt][pt]+" "+pt+"w"})).join(",")}}})),define("Components/product-image/product-image",["text!./product-image.html","ProductUtils/ImagePresets"],(function(ut,ht){return{viewModel:function i(ut){this.imgUrl=ut.imgUrl,this.size=ut.size,this.state=ut.state,this.productId=ut.productId,this.context=ut.context,this.productData=ut.productData,this.source=ht.getImageSource(this.imgUrl,this.size,ut.type),this.sourceSet=ht.getImageSourceSet(this.imgUrl,this.size,ut.type)},template:ut}})),define("Components/content/content",[],(function(){return{viewModel:function t(ut){this.state=ut.state,this.product=ut.data}}})),define("text!Components/product-gallery/product-gallery.html",[],(function(){return'\x3c!-- ko if: !isMobile--\x3e\n    <div class="gallery-aside-wrapper">\n        \x3c!-- ko if: !preventThumbnailDescription --\x3e\n            <p id="thumbnailsDescription" data-bind="text: state.resources.pdp_media_gallery_thumbnail_instruction"></p>\n        \x3c!-- /ko --\x3e\n\n        <ul class="thumbnails" data-bind="attr: { \'aria-label\': galleryText.thumbnailLabel }" aria-describedby="thumbnailsDescription">\n            \x3c!-- ko foreach: galleryItems--\x3e\n                \x3c!-- ko if: $index() > 0  --\x3e\n                    <li class="image-thumbnail" data-bind="css: { active: $parent.thumbIndex() === $index() }, attr: { \'aria-current\': $parent.thumbIndex() === $index() }">\n                        <button data-bind="click: $parent.selectThumbnail.bind($data, $index())">\n                            <img class="gallery-image" data-bind="attr: imageSources().thumbnail"/>\n                        </button>\n                    </li>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </ul>\n            <div class="interactives">\n                \x3c!-- ko if : showInteractiveButtons --\x3e\n                    \x3c!-- ko if: isVideoButtonVisible --\x3e\n                        <button class="catwalk" data-bind="visible: isVideoButtonVisible(), event: { blur: onVideoButtonBlur }, click: onVideoButtonActivated, attr: { \'aria-current\': isVideoVisible, \'aria-label\': state.resources.pdp_media_video_player_label }">\n                            <span class="interactive-icon product-play" data-bind="css: { \'product-play-filled\': isVideoVisible }"></span>\n                            <span class="interactive-text" data-bind="text: state.resources.pdp_misc_video, css: { \'active\': isVideoVisible }"></span>\n                        </button>\n                    \x3c!--/ko --\x3e\n                    \x3c!-- ko if: isSpinViewerButtonVisible --\x3e\n                    <button class="spinset" data-bind="visible: isSpinViewerButtonVisible(), click: onSpinViewerButtonActivated, attr: { \'aria-current\': isSpinViewerVisible, \'aria-pressed\': isSpinViewerPressed, \'aria-label\': state.resources.pdp_media_spinset_label }">\n                        <span class="interactive-icon product-360" data-bind="css: { \'product-360-selected\': isSpinViewerVisible }"></span>\n                        <span class="interactive-text" data-bind="css: { \'active\': isSpinViewerVisible }, text: state.resources[\'pdp_misc_spinset\']"></span>\n                    </button>\n                    \x3c!--/ko --\x3e\n                \x3c!--/ko --\x3e\n                <div id="looks-button-portal-desktop"></div>\n            </div>\n    </div>\n\x3c!-- /ko --\x3e\n\n<div\n    id="product-gallery"\n    class="product-carousel"\n    role="region"\n    tabindex="-1"\n    data-bind="\n        attr: {\n            \'aria-label\': galleryText.carouselLabel, \n            \'id\': productGalleryId\n        }"\n>\n    <div class="gallery-live-region" aria-live="polite">\n        \x3c!-- ko if: ariaLiveText --\x3e\n            <span data-bind="text: ariaLiveText"></span>\n        \x3c!-- /ko --\x3e\n    </div>\n    <div class="window" data-bind="swipe">\n        <div class="selling-fast" data-bind="visible: showSellingFastLabel">\n            <span class="selling-fast__label" data-bind="text: state.resources.pdp_misc_selling_fast"></span>\n        </div>\n        \x3c!-- ko if: !isMixMatch--\x3e\n            <div id="image-overlay-slot"></div>\n        \x3c!-- /ko --\x3e\n        <div class="gallery-images" data-bind="foreach: galleryItems, css: { animate : animate() }, style: { width : galleryWidth, marginLeft : galleryPosition }">\n            <div class="image-container" data-bind="style: { width : $parent.itemWidth, display: $parent.showCarouselControls() ? \'block\' : \'none\'}, css: { \'zoomable\': $parent.imageData(), \'hide-image\': $parent.thumbIndex() !== $index() }, attr: { \'data-gallery-index\': $index, \'aria-hidden\': $parent.thumbIndex() !== $index() }">\n                <div class="asos-media spinset imageviewer" data-bind=\'component: { name: "asos-spin-viewer-prod", params: { scene7: $parent.playerParams.scene7, viewer: { zoomFactors: $parent.zoomFactors, baseJpgQlt: 80, zoomJpgQlt: 90, handleLoadingErrors: false, showHint: false, maxPixelRatio: 3 }, api: $parent.imageViewerApis()[$index()], messages: $parent.playerParams.messages } }, visible: $parent.imageViewersVisibility()[$index()]\'></div>\n                <img class="gallery-image" data-bind="attr: imageSources().hero, event: { onload: window.asos.performance.markAndMeasure(\'pdp:gallery_image_\'+$index()+\'_displayed\')}"/>\n            </div>\n        </div>\n        \x3c!-- ko if: showCarouselControls --\x3e\n            <button\n                class="arrow-button arrow-button-right"\n                aria-controls="product-gallery"\n                aria-label="pdp_media_gallery_carousel_next"\n                data-bind="\n                    click:moveRight,\n                    markAndMeasure: \'pdp:gallery_swiping_right_interactive\',\n                    attr: {\n                        \'aria-label\': state.resources.pdp_media_gallery_carousel_next,\n                        \'aria-controls\': productGalleryId\n                    }"\n            >\n                <span aria-hidden="true" class="product-chevron-right-large-outlined"></span>\n            </button>\n            <button\n                class="arrow-button arrow-button-left"\n                aria-controls="product-gallery"\n                aria-label="pdp_media_gallery_carousel_previous"\n                data-bind="\n                    click: moveLeft,\n                    markAndMeasure: \'pdp:gallery_swiping_left_interactive\',\n                    attr: {\n                        \'aria-label\': state.resources.pdp_media_gallery_carousel_previous,\n                        \'aria-controls\': productGalleryId\n                    }"\n            >\n                <span aria-hidden="true" class="product-chevron-left-large-outlined"></span>\n            </button>\n            \x3c!-- ko if: isMobile--\x3e\n                <div class="carousel-bullets">\n                    <ul id="mobile-gallery-bullets" data-bind="foreach: galleryItems, attr: { \'aria-label\': selectImageAlt }">\n                        \x3c!-- ko if: $index() > 0 --\x3e\n                            <li data-bind="css: { active: $parent.thumbIndex() === $index() }">\n                                <button aria-describedby="mobile-gallery-bullets" data-bind="click: $parent.selectThumbnail.bind($data, $index()), attr: { \'aria-current\': ($parent.thumbIndex() === $index()).toString() }"></button>\n                            </li>\n                        \x3c!-- /ko --\x3e\n                    </ul>\n                </div>\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    </div>\n    <div class="asos-media catwalk" style="display: none" data-bind=\'component: { name: "asos-video-player-prod", params: { scene7: playerParams.scene7, player: { startInFullScreen: startVideoInFullScreen, closeOnFullScreenExited: closeVideoOnFullScreenExited, initialLoopCount: 2 }, api: videoPlayerApi, messages: playerParams.messages } }, visible: isVideoVisible\'></div>\n    <div class="asos-media spinset spinviewer" style="display: none" data-bind=\'component: { name: "asos-spin-viewer-prod", params: { scene7: playerParams.scene7, viewer: { spinSpeed: spinSpeed, zoomFactors: zoomFactors, reverseVerticalDirection: false, reverseHorizontalDirection: false, baseJpgQlt: 80, zoomJpgQlt: 90, showHint: showSpinViewerContainerHint, useInitialAnimation: true, animationIntervalStart: 100, animationIntervalPeak: 100, animationFramesCount: 5, preloadingTimeout: 30000 }, api: spinViewerApi, messages: playerParams.messages } }, visible: isSpinViewerVisible, css: { "zoomable": isSpinViewerLoadedWithoutErrors }\'></div>\n</div>\n\n\x3c!-- ko if: isMobile--\x3e\n    <div class="gallery-aside-wrapper">\n        <div class="interactives">\n            <div id="looks-button-portal"></div>\n            \x3c!-- ko if : showInteractiveButtons --\x3e\n                <button class="catwalk" data-bind="visible: isVideoButtonVisible(), click: onVideoButtonActivated, attr: { \'aria-current\': isVideoVisible, \'aria-label\': state.resources.pdp_media_video_player_label }">\n                    <span class="interactive-icon product-play" data-bind="css: { \'product-play-filled\': isVideoVisible }"></span>\n                    <span class="interactive-text" data-bind="text: state.resources.pdp_misc_video, css: { \'active\': isVideoVisible }"></span>\n                </button>\n                <button class="spinset" data-bind="visible: isSpinViewerButtonVisible(), click: onSpinViewerButtonActivated, attr: { \'aria-current\': isSpinViewerVisible, \'aria-pressed\': isSpinViewerPressed, \'aria-label\': state.resources.pdp_media_spinset_label }">\n                    <span class="interactive-icon product-360" data-bind="css: { \'product-returns\': isSpinViewerVisible }"></span>\n                    <span class="interactive-text" data-bind="css: { \'active\': isSpinViewerVisible }, text: spinViewerLabelText"></span>\n                </button>\n            \x3c!--/ko --\x3e\n        </div>\n    </div>\n\x3c!-- /ko --\x3e\n'})),define("ProductUtils/Analytics/Utils/Common",["ProductUtils/UrlUtils"],(function(ut){function r(ut,ht){return/.*;;;;evar/i.test(ut)?Array.isArray(ht)?ht.forEach((function(ht){ut=ut+"|"+ht})):ut=ut+"|"+ht:Array.isArray(ht)?ht.forEach((function(ht){ut=ut+"|"+ht})):ut=ut+";;;;"+ht,ut}var ht=new ut;return{getChannel:function e(){var ut=ht.getUrlParam("SearchQuery"),pt=ht.getUrlParam("cid");if(pt)return pt;if(null!==ut)return"search";var mt=ht.getUrlParam("ctaref");if(mt){if(/bag/i.test(mt))return"basket page";if(/saved items/i.test(mt))return"saved items";if(/wishlists/i.test(mt))return"wishlists"}return"product page"},getLinkTrackEvents:function i(ut){return ut.map((function(ut){return ut.split("=")[0]}))},getGlobalEvars:function n(){return["eVar1","eVar6","eVar10","eVar15","eVar17","eVar18","eVar19","eVar20","eVar29","eVar30","eVar45","eVar47","eVar60","eVar61","eVar69","eVar112","eVar113"]},addMerchEVarToProducts:function s(ut,ht,pt){return(ut||"").split(",;").map((function(ut){if(pt){var mt=ut.split(";;;;")[0];return";"===mt[0]&&(mt=mt.substr(1)),mt===String(pt)?r(ut,ht):ut}return r(ut,ht)})).join(",;")},getProductAreaAttribute:function a(ut){return{oosproduct:"oos product page",main:"product page"}[ut.toLowerCase()]},getAsosFulfilsPrefix:function o(ut,ht){return ut&&"asos"!==ut&&ht!==ut?"afs - ":""}}})),define("ProductUtils/calculateDiscount",[],(function(){return function(ut,ht){return Math.floor((1e3*ht-1e3*ut)/(10*ht)).toString()}})),define("ProductUtils/Analytics/Utils/GetAndPersistValue",[],(function(){return function(ut){var ht=window.s.getAndPersistValue(null,ut);return"no value"===ht||""===ht?null:ht}})),define("ProductUtils/Analytics/AddToBag",["PageConfig","ProductUtils/Analytics/Utils/Common","ProductUtils/calculateDiscount","ProductUtils/Analytics/Utils/GetAndPersistValue"],(function(ut,ht,pt,mt){return function(gt){function a(){!function r(ut,pt,mt,gt,ft,vt){ut.events=ft.join(","),pt.linkTrackVars=mt.setLinkTrackVars(vt),pt.linkTrackEvents=mt.setLinkTrackEvents(ht.getLinkTrackEvents(ft)),ut.tl(!0,"o",gt,pt)}(ft,vt,bt,St,It,xt)}for(var ft=window.s,vt={},bt=gt.commons,yt=gt.context.toLowerCase(),St="add to bag",wt=[],It=[],xt=["products","prop38","eVar66","eVar67","prop75","eVar91","eVar92","eVar151","eVar152"].concat(ht.getGlobalEvars()),Pt=0;Pt<gt.variants.length;Pt++)wt.push(gt.variants[Pt].variantId);ft.products=";"+wt.join(",;");var Tt=ht.getProductAreaAttribute(gt.addToBagType);if(ft.eVar92=Tt,ft.products=ht.addMerchEVarToProducts(ft.products,"eVar6="+ft.eVar6),ft.products=ht.addMerchEVarToProducts(ft.products,"eVar13="+Tt),"mix&match"===ut.pageType){"main"===gt.addToBagType&&(ft.products=ht.addMerchEVarToProducts(ft.products,"eVar182=mix & match"));for(var zt=0;zt<gt.variants.length;zt++)ft.products=ht.addMerchEVarToProducts(ft.products,"eVar195=mix&match rating and review impression "+Boolean(gt.variants[zt].ratings),gt.variants[zt].variantId)}else{for(var Et="asos",Ct="primary",At=0,Vt=null;At<gt.variants.length;At++)(Vt=gt.variants[At]).source&&(Ct=Vt.source.id),Vt.seller&&(Et=Vt.seller.id.toLowerCase());if(gt.variants.length){var _t=ht.getAsosFulfilsPrefix(Et,Ct.toLowerCase());ft.products=ht.addMerchEVarToProducts(ft.products,"eVar211="+_t+Ct.toLowerCase(),Vt.variantId),ft.eVar212&&(ft.products=ht.addMerchEVarToProducts(ft.products,"eVar213="+ft.eVar212)),ft.products=ht.addMerchEVarToProducts(ft.products,"eVar215="+_t+Et.toLowerCase(),Vt.variantId)}gt.saveCount&&gt.saveCount.isShowing&&(ft.products=ht.addMerchEVarToProducts(ft.products,"eVar228="+gt.saveCount.value))}if(gt.variants.length&&(ft.products=ht.addMerchEVarToProducts(ft.products,"eVar184="+gt.variants[0].sizeGuideOpened()+"-"+gt.variants[0].brandName)),"addtobagerror"===yt?(St="add to bag error",It.push("event149"),ft.prop38=gt.errorId+"|"+gt.errorCode):(It.push("event150="+gt.variants.length),It.push("event151="+function s(ut){return ut.reduce((function(ut,ht){return ut+(void 0===ht.price.current?ht.price:ht.price.current.value)}),0)}(gt.variants)),It.push("scAdd"),It.push("scOpen")),"product page"===Tt){if(gt.variants.length){if(gt.ratings&&Object.keys(gt.ratings).length){var kt=(gt.ratings.averageOverallRating/5).toFixed(2),Mt=gt.ratings.totalReviewCount;if(ft.products=ht.addMerchEVarToProducts(ft.products,["eVar189="+kt,"eVar190="+Mt]),It.push("event257="+kt),It.push("event258="+Mt),gt.ratings.percentageRecommended){var Dt=gt.ratings.percentageRecommended;ft.products=ht.addMerchEVarToProducts(ft.products,"eVar191="+Dt),It.push("event259="+Dt)}if(gt.ratings.mostRecent){var Lt=(gt.ratings.mostRecent.rating/5).toFixed(2);ft.products=ht.addMerchEVarToProducts(ft.products,"eVar202="+Lt),It.push("event274="+Lt)}if(gt.ratings.subRatings&&gt.ratings.subRatings.length){var Rt=gt.ratings.subRatings[0],Ft=(Rt.percentage/100).toFixed(2);ft.products=ht.addMerchEVarToProducts(ft.products,"eVar192="+Rt.id+" "+Ft),It.push("event260="+Ft)}}else if(gt.ratings&&"product"===ut.pageType){var Ot="value not in response";ft.products=ht.addMerchEVarToProducts(ft.products,["eVar189="+Ot,"eVar190="+Ot,"eVar191="+Ot,"eVar192="+Ot,"eVar202="+Ot])}if(gt.variants[0].priceObj.rrp)var Ut=gt.variants[0].priceObj.rrp.value;var Bt=gt.variants[0].priceObj.current.value;if(Ut)ft.eVar161=pt(Bt,Ut);else{var Nt=gt.variants[0].priceObj.previous.value;ft.eVar161=pt(Bt,Nt)}gt.variants[0].sellingFast&&(ft.products=ht.addMerchEVarToProducts(ft.products,"eVar151=selling fast"))}if(ft.eVar230){var qt=mt("gpv_eVar243");ft.products=ht.addMerchEVarToProducts(ft.products,"eVar243="+qt)}ft.gpv_eVar234&&(ft.products=ht.addMerchEVarToProducts(ft.products,"eVar234="+ft.gpv_eVar234)),xt=xt.concat(["prop36","eVar50","eVar51","eVar150","eVar161","eVar231"]),a()}else a()}})),define("ProductUtils/Analytics/PageInteraction",["Promise","Providers/FeaturesProvider","ProductUtils/Analytics/Utils/Common","ProductUtils/Window"],(function(ut,ht,pt,mt){return function(gt){function r(ut){St.events=bt.join(","),ft.linkTrackVars=vt.setLinkTrackVars(["prop15","eVar183"].concat(pt.getGlobalEvars())),ft.linkTrackEvents=vt.setLinkTrackEvents(pt.getLinkTrackEvents(bt)),St.tl(!0,"o",ut,ft)}function h(ut){var ht=ut.filter((function(ut){return ut.id===gt.eventData.productIID||void 0}));return ht.length>0?ht[0].variants:[]}function g(){wt.then((function(ut){ut&&(St.prop15=yt,r(yt))}))}var ft={},vt=gt.commons,bt=[],yt=gt.eventData.context.toLowerCase(),St=mt.s,wt=new ut((function(ut){ht.onReady().then((function(){var pt=ht.getFeature("pdp-track-product-image-interactions");ut(pt.isEnabled())}))}));gt.eventData.productIID&&(St.products=";"+gt.eventData.productIID),bt.push("event18");var It={launchsizeguide:function d(){St.prop15="launch size guide",bt.push("event103"),r("size guide click")},freedeliveryandreturns:function c(){St.prop15="free delivery and returns",bt.push("event95"),r("free delivery and returns click")},shippingrestrictions:function l(){void 0===mt.trackingShippingRestrictionsClick&&(mt.trackingShippingRestrictionsClick=1,St.prop15="shipping restrictions",r("shipping restrictions click"))},showmore:function o(){void 0===mt.trackingEventMore&&(mt.trackingEventMore=1,St.prop15="show more",r("show more click"))},showless:function a(){void 0===mt.trackingEventLess&&(mt.trackingEventLess=1,St.prop15="show less",r("show less click"))},openmodal:function p(){var ut=mt.asos.pdp.config.product.products,ht=function u(ut){return ut.filter((function(ut){return!0===ut.isInStock})).length}(h(ut)),pt=h(ut).length,ft=0===pt?"0":(100*(ht/pt)).toFixed(2)+"%|";gt.eventData.modalType&&"mixAndMatch"===gt.eventData.modalType&&(St.prop15="mix and match|open modal",St.eVar31=h(ut).length+"|"+ht+"|"+ft+"null|null|null|null|null|null"),r("mix and match modal click")},chevronclick:function m(){wt.then((function(ut){ut&&void 0===mt.trackingChangeThumbnail&&(mt.trackingChangeThumbnail=1,St.prop15="product chevron click",r("product chevron click"))}))},"360launch":g,"360zoom":g,thumbnailclick:g,video:function f(){wt.then((function(ut){ut&&(St.prop15="video progress "+gt.eventData.videoEvent,r(yt))}))},ingredientsbuttonclick:function v(){St.prop15="ingredients list",r(yt)}};It[yt]()}})),define("ProductUtils/Analytics/Utils/PageLoad",["ProductUtils/Window","Promise"],(function(ut,ht){return new ht((function(ht){ut.asos.eventBus.addListener("pageLoadAnalyticsFired",(function(){ht()}))}))})),define("ProductUtils/Analytics/CustomLinkEvent",["ProductUtils/Analytics/Utils/Common","ProductUtils/Window","ProductUtils/Analytics/Utils/PageLoad","PageConfig"],(function(ut,ht,pt,mt){return function(gt){function r(ht,mt,gt){pt.then((function(){bt.events=mt.join(",");var pt={linkTrackVars:ft.setLinkTrackVars(gt.concat(ut.getGlobalEvars())),linkTrackEvents:ft.setLinkTrackEvents(ut.getLinkTrackEvents(mt))};bt.tl(!0,"o",ht,pt)}))}var ft=gt.commons,vt=gt.eventName.toLowerCase(),bt=ht.s,yt={fireflexfulfilmentanalyticsevent:function o(){var ht="primary",pt="asos",ft=[],vt=gt.variant.source,yt=gt.variant.seller,St=!1;if(vt&&(ht=vt.id.toLowerCase(),-1===ft.indexOf("event288")&&(ft.push("event288"),St=!0)),yt&&(pt=yt.id.toLowerCase(),-1===ft.indexOf("event288")&&(ft.push("event288"),St=!0)),"mix&match"===mt.pageType||vt||yt||-1!==ft.indexOf("event303")||(ft.push("event303"),St=!0),St){var wt=ut.getAsosFulfilsPrefix(pt,ht);bt.eVar210=gt.variant.id+":"+wt+ht,bt.eVar214=gt.variant.id+":"+wt+pt,r("sourcing location messaging Impression",ft,["eVar210","eVar212","eVar214"])}}};yt[vt]()}})),define("ProductUtils/Analytics",["ProductUtils/Analytics/AddToBag","ProductUtils/Analytics/PageInteraction","ProductUtils/Analytics/CustomLinkEvent","Providers/FeaturesProvider","ProductUtils/Window"],(function(ut,ht,pt,mt,gt){function r(){return mt.onReady().then((function(){return mt.getFeature("pdp-save-count").isEnabled()}))}return new function(){var mt;window.CommonAnalytics&&(mt=new window.CommonAnalytics),this.firePageInteraction=function(ut){ht({eventData:ut,commons:mt})},this.normalizeError=function(ut,ht){var pt=[{errorCode:null,errorMessage:ht}];return ut.message=Array.isArray(ut.message)?ut.message:pt,ut},this.addVariants=function(ht,pt,ft,vt,bt){ht=void 0===ht.length?[ht]:ht,void 0===ft&&(ft="main"),r().then((function(yt){pt?ut({context:"addToBagError",addToBagType:ft,variants:ht,errorCode:pt.message[0].errorCode,errorId:pt.message[0].errorMessage,commons:mt,ratings:vt,saveCount:yt?bt:null}):(ut({context:"addToBag",addToBagType:ft,variants:ht,commons:mt,ratings:vt,saveCount:yt?bt:null}),gt.asos.eventBus.emit("fireAddToBagMarketingEvent",ht))}))},this.fireFlexFulfilmentAnalyticsEvent=function(ut){pt({commons:mt,eventName:"fireFlexFulfilmentAnalyticsEvent",variant:ut})}}})),define("ProductUtils/Browser",["ko","ProductUtils/Window"],(function(ut,ht){function i(){vt(ft.large.matches?gt:ft.medium.matches?mt:pt)}var pt="SMALL_VIEWPORT",mt="MEDIUM_VIEWPORT",gt="LARGE_VIEWPORT",ft={medium:ht.matchMedia("(min-width: 720px)"),large:ht.matchMedia("(min-width: 1024px)")},vt=ut.observable();return ft.medium.addListener(i),ft.large.addListener(i),i(),{isOnline:function n(){return!ht.navigator||ht.navigator.onLine},viewportSize:vt,isUpToViewport:function s(ht){return ut.computed((function(){var ut=!1;switch(ht){case pt:ut=vt()===pt;break;case mt:ut=[pt,mt].indexOf(vt())>-1;break;case gt:ut=[pt,mt,gt].indexOf(vt())>-1}return ut}))},viewports:{SMALL_VIEWPORT:pt,MEDIUM_VIEWPORT:mt,LARGE_VIEWPORT:gt}}})),define("Components/product-gallery/product-gallery",["ko","$","text!./product-gallery.html","PageConfig","hammer","Asos.Utils.MediaPlayers","ProductUtils/Analytics","ProductUtils/UrlUtils","ProductUtils/Browser","ProductUtils/ImagePresets","ProductUtils/Window"],(function(ut,ht,pt,mt,gt,ft,vt,bt,yt,St,wt){return{viewModel:function u(ht){var pt=ht.state;this.product=ht.data.product,this.productGalleryId="product-gallery"+(ht.data.product?"":"-modal");var It=ht.data.images;this.galleryItems=ut.observableArray(),this.galleryWidth=ut.observable(),this.itemWidth=ut.observable(),this.itemWidthValue=ut.observable(),this.galleryPosition=ut.observable(),this.galleryIndex=ut.observable(0),this.animate=ut.observable(!1),this.thumbIndex=ut.observable(0),this.isInStock=ut.observable(!1),this.isMobile="mobile"===mt.platform,this.ariaLiveText=ut.observable(""),this.isSmallViewport=yt.isUpToViewport(yt.viewports.SMALL_VIEWPORT),this.preventThumbnailDescription=ht.data.preventThumbnailDescription,this.isMixMatch=ht.data.isMixMatch;var xt=new bt,Pt={imageChanged:!1,thumbnailClick:!1,imageViewerZoomIn:!1,spinViewerInit:!1,spinViewerSpin:!1,spinViewerZoomIn:!1,videoPlayerInit:!1,videoProgress:{50:!1,100:!1}};this.checkIfInStockAndSetFlag=function(){this.isInStock(!pt.productData||pt.productData.isInStock)},this.getVisibleImages=function(ht){var pt=ht.filter((function(ut){return!0===ut.isVisible}));if(!pt[0].colourWayId||null===pt[0].colourWayId){var mt=ut.utils.arrayFirst(ht,(function(ut){return ut.isPrimary}));if(mt||(mt=ut.utils.arrayFirst(ht,(function(ut){return ut.colourWayId&&null!==ut.colourWayId}))),mt){var gt=pt.indexOf(mt);gt>=0&&pt.splice(gt,1),pt.splice(0,0,mt)}}return pt};var Tt,zt=this.getVisibleImages(It);this.appendImageSources=function(ht){return ht.map(function(ht,pt){var mt=function(){var ut=0===pt?this.colourOptionImage().url:ht.url;return{thumbnail:{sizes:"40px",alt:this.getThumbnailAlt(pt+1),src:St.getImageSource(ut,40,"thumbnail"),srcset:St.getImageSourceSet(ut,40,"thumbnail")},hero:{sizes:"(max-width: 720px) 100vw, (min-width: 720px) 513px",alt:this.getImageAlt(pt+1),src:St.getImageSource(ut,513,"hero"),srcset:St.getImageSourceSet(ut,513,"hero")}}}.bind(this);return ht.imageSources=0===pt?ut.computed(mt):mt,ht}.bind(this))}.bind(this),this.getThumbnailAlt=function(ut){return pt.resources.pdp_media_gallery_thumbnail_count.replace("%{index}",ut).replace("%{total}",zt.length)}.bind(this),this.getImageAlt=function(ut){return(this.product?this.product.name:ht.data.productName)+", "+pt.resources.pdp_misc_count.replace("%{index}",ut).replace("%{total}",zt.length)}.bind(this),this.selectImageAlt=pt.resources.pdp_media_gallery_select_image,pt.mainImage=this.colourOptionImage=ut.observable(zt[0]),this.init=function(){this.galleryItems(this.shuffleLastImage(this.appendImageSources(zt))),this.galleryWidth(this.getGalleryWidth()),this.itemWidth(this.getItemWidth()),this.setSwipe(),this.setImageViewers(),this.setGalleryPosition(1)},this.setGalleryPosition=function(ut){this.galleryIndex(ut),0===ut?this.thumbIndex(this.galleryItems().length-1):this.thumbIndex(ut),this.galleryPosition("-"+100*Math.abs(this.galleryIndex())+"%")},this.getItemWidth=function(){return 100/this.galleryItems().length+"%"},this.getGalleryWidth=function(){return 100*this.galleryItems().length+"%"},this.shuffleLastImage=function(ut){var ht=ut,pt=ut[ut.length-1];return ht.unshift(pt),ht},this.moveLeft=function(){return this.resetImageViewer(),0===this.galleryIndex()?(this.animate(!1),this.setGalleryPosition(this.galleryItems().length-1),setTimeout(function(){this.animate(!0),this.setGalleryPosition(this.galleryItems().length-2),Pt.imageChanged||(vt.firePageInteraction({context:"chevronClick",productIID:ht.data.id}),Pt.imageChanged=!0)}.bind(this),10),!1):(this.animate(!0),this.setGalleryPosition(this.galleryIndex()-1),Pt.imageChanged||(vt.firePageInteraction({context:"chevronClick",productIID:ht.data.id}),Pt.imageChanged=!0),!1)},this.moveRight=function(){return this.resetImageViewer(),this.galleryIndex()===this.galleryItems().length-1?(this.animate(!1),this.setGalleryPosition(0),setTimeout(function(){this.animate(!0),this.setGalleryPosition(1),Pt.imageChanged||(vt.firePageInteraction({context:"chevronClick",productIID:ht.data.id}),Pt.imageChanged=!0)}.bind(this),10),!1):(this.animate(!0),this.setGalleryPosition(this.galleryIndex()+1),Pt.imageChanged||(vt.firePageInteraction({context:"chevronClick",productIID:ht.data.id}),Pt.imageChanged=!0),!1)},this.selectThumbnail=function(ut,pt){this.exitVideo(),this.exitSpinViewer(),this.resetImageViewer(),this.animate(!1),this.setGalleryPosition(ut),!0===pt||Pt.thumbnailClick||(vt.firePageInteraction({context:"thumbnailClick",productIID:ht.data.id}),Pt.thumbnailClick=!0)}.bind(this),this.trySetColour=function(ut){var ht=function i(ut){for(var ht=-1,pt=0;pt<It.length;pt++)if(It[pt].colourWayId===ut){ht=pt;break}return ht}(ut);if(-1!==ht){this.colourOptionImage(It[ht]),this.exitVideo(),this.exitSpinViewer(),this.setGalleryPosition(1),this.imageViewersVisibility()[1]&&this.initImageViewer(1)}},wt.asos.eventBus.addListener("setProductImage",function(ut){this.trySetColour(ut)}.bind(this)),this.trySetProductImage=function(ut){for(var ht=1,pt=0;pt<It.length;pt++)if(It[pt].productId===ut){ht=pt+1;break}this.setGalleryPosition(ht)},this.videoPlayerApi=ut.observable(),this.exitVideo=function(){if(this.isVideoVisible(!1),this.videoPlayerApi()&&this.videoPlayerApi().stop)try{this.videoPlayerApi().stop(),wt.asos.eventBus.emit("videoPlaybackStopped")}catch(ut){console.warn("could not stop video: "+ut)}},this.keydownEventListener=function(){var ut;document.addEventListener("keydown",(ut=function(ht){("Escape"===ht.key||27===ht.keyCode)&&(this.exitVideo(),document.removeEventListener("keydown",ut))}).bind(this))},this.keydownEventListener(),document.body.addEventListener("modalClosed",function(){this.exitVideo()}.bind(this)),this.startVideoInFullScreen=this.isMobile,this.closeVideoOnFullScreenExited=this.isMobile,this.canDisplayVideoButton=ut.observable(!1),this.isVideoVisible=ut.observable(!1),this.playerParams=ht.data.playerParams,this.isVideoButtonVisible=ut.computed(function(){return this.canDisplayVideoButton()&&this.isInStock()}.bind(this)),this.playerParams.messages={errorHeaderText:pt.resources.pdp_media_video_player_error_header,errorMessageText:pt.resources.pdp_media_video_player_error_message,spinsetErrorMessageText:pt.resources.pdp_media_spinset_error_message,refreshButtonText:pt.resources.pdp_media_video_player_refresh_button,unsupportedHeaderText:pt.resources.pdp_media_video_player_unsupported_header,unsupportedMessageText:pt.resources.pdp_media_video_player_unsupported_message,closeButtonText:pt.resources.pdp_media_video_player_close_button,hintDragText:pt.resources.pdp_media_spinset_hint_drag,hintTapText:pt.resources.pdp_media_spinset_hint_tap,zoomHint:pt.resources.pdp_media_gallery_zoom_hint,zoomOneHundred:pt.resources.pdp_media_gallery_zoom_one_hundred,zoomTwoHundred:pt.resources.pdp_media_gallery_zoom_two_hundred,zoomFourHundred:pt.resources.pdp_media_gallery_zoom_four_hundred},this.onVideoButtonActivated=function(){Pt.videoFirstPlaybackCompleted=!1,this.isVideoVisible()||(this.resetImageViewer(),this.isVideoVisible(!0),this.exitSpinViewer(),this.videoPlayerApi().start(Tt),wt.asos.eventBus.emit("videoPlaybackStarted"),this.ariaLiveText(pt.resources.accessibility_pdp_video_playing),Pt.videoPlayerInit||(vt.firePageInteraction({context:"video",productIID:ht.data.id,videoEvent:"start"}),Pt.videoPlayerInit=!0))},this.onVideoButtonBlur=function(){this.ariaLiveText("")},this.videoPlayerApi.subscribe(function(ut){ut.events.on("playerExitRequested allLoopsEnded",function(){this.exitVideo()}.bind(this)),ut.events.on("progress",(function(ut,pt){if(pt.detail.value)for(var mt in Pt.videoProgress){var gt=parseInt(mt,10);!Pt.videoProgress[mt]&&pt.detail.value>=gt&&(Pt.videoProgress[mt]=!0,vt.firePageInteraction({context:"video",productIID:ht.data.id,videoEvent:mt}))}}));var pt={formats:["mp4"],preferredFPS:25,preferredBitrates:{720:12e3}};ht.data.useProductIdForVideos?ut.loadAssets(ht.data.id,pt,function(){this.canDisplayVideoButton(!0),this.checkIfInStockAndSetFlag()}.bind(this)):ht.data.media&&ht.data.media.catwalkUrl&&ft.getVideoPlayerAssetsProvider(ht.data.playerParams.scene7.videoServer).getAssets(xt.formatUrl(ht.data.media.catwalkUrl),pt).then(function(ut){Tt=ut,this.canDisplayVideoButton(!0),this.checkIfInStockAndSetFlag()}.bind(this))}.bind(this)),this.spinViewerApi=ut.observable(),this.exitSpinViewer=function(){this.spinViewerApi()&&this.spinViewerApi().zoomReset(),this.isSpinViewerVisible(!1)},this.spinSpeed=this.isMobile?1.5:3,this.showSpinViewerContainerHint=!this.isMobile,this.zoomFactors=[.5,1],this.isSpinViewerButtonVisible=ut.observable(!1),this.isSpinViewerVisible=ut.observable(!1),this.isSpinViewerPressed=ut.computed(function(){return this.isMobile?this.isSpinViewerVisible().toString():void 0}.bind(this)),this.isSpinViewerLoadedWithoutErrors=ut.observable(!1),this.spinViewerLabelText=ut.observable(pt.resources.pdp_misc_spinset),this.onSpinViewerButtonActivated=function(){this.spinViewerLabelText(pt.resources.pdp_misc_gallery),this.isSpinViewerVisible()?this.isMobile&&(this.spinViewerLabelText(pt.resources.pdp_misc_spinset),this.exitSpinViewer()):(this.resetImageViewer(),this.exitVideo(),this.isSpinViewerVisible(!0),this.spinViewerApi().init(),Pt.spinViewerInit||(vt.firePageInteraction({context:"360Launch",productIID:ht.data.id}),Pt.spinViewerInit=!0))},this.spinViewerApi.subscribe(function(ut){if(ht.data.media&&ht.data.media.threeSixtyUrl&&ht.data.media.threeSixtyUrl.length>0){ut.events.on("zoomedIn",(function(){Pt.spinViewerZoomIn||(vt.firePageInteraction({context:"360Zoom",productIID:ht.data.id}),Pt.spinViewerZoomIn=!0)})),ut.events.on("allImagesLoaded",function(ut,ht){ht&&this.isSpinViewerLoadedWithoutErrors(ht)}.bind(this));var mt=ht.data.id;ut.loadAssets(mt,function(){this.isSpinViewerButtonVisible(!pt.productData||pt.productData.isInStock)}.bind(this))}}.bind(this)),this.showCarouselControls=ut.computed(function(){return!this.isVideoVisible()&&!this.isSpinViewerVisible()}.bind(this)),this.imageData=ut.observable(),this.imageViewerApis=ut.observableArray([]),this.imageViewersVisibility=ut.observableArray([]),this.areAllImageViewerApisReady=function(){for(var ut=0;ut<this.imageViewerApis().length;ut++)if(!this.imageViewerApis()[ut]())return!1;return!0},this.initImageViewer=function(ut){var pt=this.imageViewersVisibility(),mt=this.imageData(),gt=this.imageViewerApis()[ut](),ft=ht.data.rootElement.querySelector('.image-container[data-gallery-index="'+ut+'"] img.gallery-image');if(ft.complete){if(ft.complete&&gt&&mt){pt[ut]=!0,this.imageViewersVisibility(pt);var vt=ft.cloneNode();vt.style.visibility="visible",gt.setAssets(mt[this.getImageIndexFromGalleryIndex(ut)]),gt.init(null,vt),ft.style.visibility="hidden"}}else ft.onload=this.initImageViewer.bind(this,ut)},this.loadImagesMetadata=function(ut){ft.getSpinViewerAssetsProvider(ht.data.playerParams.scene7.imageServer).getAssets(ut,function(ut){this.imageData(ut),this.checkIfInStockAndSetFlag()}.bind(this))},this.imageData.subscribe(function(ut){if(ut)for(var ht=0;ht<this.imageViewerApis().length;ht++)this.initImageViewer(ht)}.bind(this)),this.onImageViewerApiReady=function(ut){var pt=ht.data.rootElement.querySelector('[data-gallery-index="'+ut+'"]');this.imageData()&&this.initImageViewer(ut,pt)},this.getImageIndexFromGalleryIndex=function(ht){var pt=1===ht?this.colourOptionImage():this.galleryItems()[ht],mt=ut.utils.arrayFirst(It,(function(ut){return ut.url===pt.url}));return It.indexOf(mt)},this.setImageViewers=function(){for(var ht,pt=this.galleryItems(),mt=[],gt=0;gt<It.length;gt++)mt.push(It[gt].url);for(gt=0;gt<pt.length;gt++)ht=ut.observable(),this.imageViewerApis.push(ht),this.imageViewersVisibility.push(!1),ht.subscribe(this.onImageViewerApiReady.bind(this,gt));this.loadImagesMetadata(mt)},this.resetImageViewer=function(){var ut=this.imageViewerApis()[this.galleryIndex()]&&this.imageViewerApis()[this.galleryIndex()]();ut&&ut.zoomReset()},this.setSwipe=function(){if(window.addEventListener){var ut=document.querySelector(".product-gallery .window"),ht=new gt(ut,{inputClass:gt.TouchInput});ht.on("swipeleft",function(){this.moveRight()}.bind(this)),ht.on("swiperight",function(){this.moveLeft()}.bind(this))}},this.showSellingFastLabel=ut.computed(function(){var ut=!this.isVideoVisible()&&!this.isSpinViewerVisible();return this.isInStock()&&ht.state.sellingFast&&ut}.bind(this)),this.galleryText={thumbnailLabel:pt.resources.pdp_media_gallery_thumbnail_label,carouselLabel:pt.resources.pdp_media_gallery_carousel_label},this.showInteractiveButtons=ut.computed(function(){return!!this.isInStock&&(this.isVideoButtonVisible()||this.isSpinViewerButtonVisible())}.bind(this)),this.init(),wt.asos.eventBus.emit("GalleryInitialised")},template:pt}})),define("ProductUtils/ScrollTo",["$","ko"],(function(ut,ht){return this.scrollToElement=function(ht,pt){var mt=ut(ht);mt.length>0&&ut("html, body").animate({scrollTop:mt.offset().top+pt+"px"},"fast")},this.scrollToTop=function(){ut("html, body").animate({scrollTop:"0px"},"fast")},ht.bindingHandlers.scrollTo={init:function(pt,mt){var gt=mt(),ft=ht.unwrap(gt),vt=ft,bt=0;"object"==typeof ft&&(vt=ft.selector,ft.topPadding&&(bt=ft.topPadding)),ut(pt).click(function(){this.scrollToElement(vt,bt)}.bind(this))}},ht.bindingHandlers.scrollToTop={init:function(ht){ut(ht).click(function(){this.scrollToTop()}.bind(this))}},this})),define("ProductUtils/Performance",["ko"],(function(ut){ut.bindingHandlers.markAndMeasure={init:function(ht,pt){var mt=ut.unwrap(pt());window.asos.performance.markAndMeasure(mt)}}})),define("Pages/FullProduct",["ko","ProductUtils/ComponentLoader","Asos.Utils.MediaPlayers","ProductUtils/StockPrice","ProductUtils/FeatureTracking","Models/VariantDecorator","Components/product-image/product-image","Components/content/content","Components/product-gallery/product-gallery","PageConfig","ProductUtils/NewRelicLogger","Components/product-gallery/product-gallery","ProductUtils/ScrollTo","ProductUtils/Performance"],(function(ut,ht,pt,mt,gt,ft,vt,bt,yt,St,wt){return this.init=function(){function n(){Tt||(Pt.register({type:"content",name:"content3",elementId:"gallery-content",useComponentTemplate:!1},xt,this.state),ut.components.register("product-gallery",yt),ut.components.register("product-image",vt),ut.components.register("asos-video-player-prod",pt.videoPlayer),ut.components.register("asos-spin-viewer-prod",pt.spinViewer),Tt=!0)}wt.init(wt.PAGE_TYPE.PRD),gt.onPageLoadStart();var mt=window.asos.pdp.config.product,ft=window.asos.pdp.config.translations,bt=window.asos.pdp.config.ratings,It=window.asos.pdp.config.product.saveCount,xt="string"==typeof mt?JSON.parse(mt):mt,Pt=new ht;this.isMobile="mobile"===St.platform,xt||wt.logError(new Error(wt.ERROR_TYPE.ParseError),{action:"PageInit",message:"server-side product data missing or invalid"}),this.state={resources:ft,features:window.asos.pdp.config.features,gender:xt.gender,sellingFast:xt.sellingFast,ratings:bt,saveCount:It,hasVariantsWithIngredients:xt.hasVariantsWithIngredients};var Tt=!1;document.addEventListener("DOMContentLoaded",function(){n.call(this)}.bind(this)),document.getElementById("gallery-content")&&n.call(this)},this.init})),window.location.href.includes("/prd/")&&require(["Pages/FullProduct"],(function(ut){ut()})),define("text!Components/product-price/product-price.html",[],(function(){return'<div class="grid-row rendered price-container" data-testid="product-price">\n  <span class="sr-in-doc-flow" aria-live="polite" data-bind="text: getAriaLabel()"></span>\n  <div aria-hidden="true">\n    <div class="current-price">\n      <span data-testid="current-price" data-bind="text: priceText, markAndMeasure: \'pdp:price_displayed\', css: { discounted: isDiscountedPrice }" class="current-price-text"></span>\n      \x3c!-- ko if: showGermanVatMessage --\x3e\n      <span data-testid="german-vat-message" data-bind="text: i18n.pdp_misc_vat_message" class="product-german-vat"></span>\n      \x3c!-- /ko --\x3e\n    </div>\n    <div>\n      \x3c!-- ko if: showLowestPrice30Days() --\x3e\n      <span data-bind="text: lowestPrice30DaysText" class="previous-price-text"></span>\n      <span data-bind="text: lowestPrice30DaysPercentage, css: { discounted: lowestPrice30DaysPercentageHighlight }" class="previous-price-text"></span>\n      \x3c!-- /ko --\x3e\n    </div>\n    <div>\n      \x3c!-- ko if: showRrpPrice() --\x3e\n      <span data-bind="text: rrpPriceText" class="previous-price-text"></span>\n      \x3c!-- /ko --\x3e\n      \x3c!-- ko if: showPrevPrice() --\x3e\n      <span data-bind="text: prevPriceText" class="previous-price-text"></span>\n      \x3c!-- /ko --\x3e\n      \x3c!-- ko if: isDiscountedPrice --\x3e\n      <span data-bind="text: \'(\' + discountText() + \')\', visible: !!discountText()" class="price-discount-percent"></span>\n      \x3c!-- /ko --\x3e\n    </div>\n  </div>\n</div>\n'})),define("ProductUtils/Discount",["ko","Providers/FeaturesProvider","ProductUtils/calculateDiscount"],(function(ut,ht,pt){function n(ut,ht){return"-"+pt(ut,ht)+"%"}var mt=ut.observable(!1),gt=[];return ht.onReady().then((function(){mt(ht.getFeature("all-show-discount-label").isEnabled())})),mt.subscribe((function(ut){ut&&gt.forEach((function(ut){ut.observable(n(ut.currentPrice,ut.previousPrice))}))})),{getDiscountText:function s(ut,ht,pt){return mt()?void ut(n(ht,pt)):(gt.push({observable:ut,currentPrice:ht,previousPrice:pt}),ut(""))}}})),define("Components/product-price/product-price",["ko","text!./product-price.html","ProductUtils/Discount","PageConfig"],(function(ut,ht,pt,mt){function r(ut){return null!=ut}return{viewModel:function o(ht){var gt=["FR","DE","ROE","NL","SE","DK","IT","PL","ES","ROW"].indexOf(mt.countryCode)>-1,ft=ht.state,vt=ft.productData;this.i18n=ft.resources,this.showGermanVatMessage=!!ht.showGermanVatMessage;var bt=ut.observable(vt.price);this.showLowestPrice30Days=ut.computed((function(){return!(!gt||!bt())&&(r(bt().lowestPriceInLast30DaysText)&&r(bt().lowestPriceInLast30DaysValue))})),this.lowestPrice30DaysText=ut.computed(function(){return this.showLowestPrice30Days()?this.i18n.lowest_price_last_thirty_days+" "+bt().lowestPriceInLast30DaysText:""}.bind(this)),this.lowestPrice30DaysPercentage=ut.computed(function(){return this.showLowestPrice30Days()?function s(ut){if(isNaN(ut))return"";var ht=-ut;return"("+(ht>0?"+":"")+ht+"%)"}(bt().lowestPriceInLast30DaysPercentage):""}.bind(this)),this.lowestPrice30DaysPercentageHighlight=ut.computed(function(){return this.showLowestPrice30Days()?bt().lowestPriceInLast30DaysPercentage>0:void 0}.bind(this)),this.showRrpPrice=ut.computed((function(){return!!bt()&&bt().isOutletPrice})),this.rrpPrice=ut.computed(function(){return this.showRrpPrice()?bt().rrp:void 0}.bind(this)),this.rrpPriceText=ut.computed(function(){if(!this.rrpPrice())return"";var ut=this.rrpPrice().text;return ut?this.i18n.pdp_price_rrp+" "+ut:""}.bind(this)),this.showPrevPrice=ut.computed(function(){return!!bt()&&(bt().isMarkedDown&&!bt().isOutletPrice)}.bind(this)),this.prevPrice=ut.computed(function(){return this.showPrevPrice()?bt().previous:void 0}.bind(this)),this.prevPriceText=ut.computed(function(){return this.showPrevPrice()?this.i18n.was_pricing_label+" "+this.prevPrice().text:""}.bind(this)),this.showFromLabel=ut.computed((function(){return!(!vt.hasDifferentPrices||ft.selectedSize()&&ft.selectedColour())})),this.price=ut.computed((function(){return bt()?bt().current:void 0})),this.priceText=ut.computed(function(){if(void 0===this.price())return"";var ut="";return(this.showPrevPrice()||this.showRrpPrice())&&(ut=this.i18n.now_pricing_label+" "),this.showFromLabel()&&(ut=this.i18n.pdp_misc_from+" "),ut+this.price().text}.bind(this)),this.isDiscountedPrice=ut.computed(function(){return this.showPrevPrice()||this.showRrpPrice()}.bind(this)),this.discountText=ut.observable("");var yt=function(){this.showRrpPrice()&&this.rrpPrice()?pt.getDiscountText(this.discountText,this.price().value,this.rrpPrice().value):this.showPrevPrice()&&this.prevPrice()&&pt.getDiscountText(this.discountText,this.price().value,this.prevPrice().value)}.bind(this);this.getAriaLabel=ut.computed(function(){var ut=this.priceText();return this.showGermanVatMessage&&(ut=ut.concat(" ",this.i18n.pdp_misc_vat_message_longform||this.i18n.pdp_misc_vat_message)),this.showLowestPrice30Days()&&(ut=ut.concat(". "+this.lowestPrice30DaysText()+" "+this.lowestPrice30DaysPercentage())),this.showPrevPrice()&&(ut=ut.concat(". "+this.prevPriceText())),this.showRrpPrice()&&(ut=ut.concat(". "+(this.i18n.pdp_price_rrp_longform||this.i18n.pdp_price_rrp)," ",this.rrpPrice().text)),this.isDiscountedPrice()&&this.discountText()&&(ut=ut.concat(". ("+this.discountText()+")")),ut}.bind(this)),ft.selectedSize.subscribe(function(ut){bt(ut?ut.price:vt.price),yt()}.bind(this)),yt()},template:ht}})),define("text!Components/add-item/add-item.html",[],(function(){return'<div class="add-item" data-bind="visible: isVisible">\n    <div class="is-add-item-saving" data-bind="visible: isBusy"></div>\n    <span class="aria-live" role="status" aria-live="polite" data-bind="{ text: ariaLiveText }" data-testid="ariaLiveRegion"></span>\n    <button data-bind="click: addToBag, css : buttonCss, attr: { \'id\': isMixMatch ? null : \'product-add-button\', \'aria-label\': resources.pdp_cta_add_to_bag, disabled: isBusy }, markAndMeasure: \'pdp:add_to_bag_interactive\'" data-testid="add-button">\n        <span class="product-tick" data-bind="visible: showProductTick"></span>\n        <span data-bind="text: buttonText"></span>\n    </button>\n</div>\n'})),define("ProductUtils/Analytics/Utils/GetProductBeaconsMapFromStorage",[],(function(){return function(){var ut;try{ut=JSON.parse(sessionStorage.getItem("productBeaconsMap"))||{}}catch(ht){ut={}}return ut}})),define("ProductUtils/Analytics/Utils/SponsoredAdsBeacons",["ProductUtils/Analytics/Utils/GetProductBeaconsMapFromStorage"],(function(ut){var ht="productBeaconsMap";return{sendBeacon:function e(pt,mt){var gt=ut(),ft=gt[pt];if(ft){var vt=ft[mt];vt&&(navigator.sendBeacon(vt),delete ft[mt],0===Object.keys(ft).length&&delete gt[pt],sessionStorage.setItem(ht,JSON.stringify(gt)))}}}})),define("ProductUtils/Bag",["ProductUtils/Analytics","ProductUtils/NewRelicLogger","Providers/SdkProvider","ProductUtils/Analytics/Utils/SponsoredAdsBeacons"],(function(ut,ht,pt,mt){return function(gt,ft){function o(ut,ht){for(var pt in ht)ht.hasOwnProperty(pt)&&(ut[pt]=ht[pt]);return ut}function a(ut){return{productId:ut.productId,colour:ut.colourName,sizeId:ut.sizeId,variantId:ut.variantId,price:ut.price.current.value,priceObj:ut.price,sellingFast:gt.state.sellingFast,ratings:!!ut.ratings,sizeGuideOpened:gt.state.sizeGuideOpened,brandName:ut.brandName,source:ut.source,seller:ut.seller,sku:ut.sku}}return this.error="",void 0!==gt&&(this.error=gt.state.resources.pdp_status_error_max_items),this.addItems=function(ut,ht){pt.getBag().then(function(pt){var mt;if(ut.length>1){var gt=this.formatAddProducts(ut);mt=pt.addVariants(gt),this.watchPromise(mt,ht,gt,ft)}else{var vt=void 0!==ut[0]?ut[0]:ut;vt.colourName=void 0===vt.colourName?vt.colour:vt.colourName;var bt=a(vt);mt=pt.addVariant(bt),this.watchPromise(mt,ht,bt,ft)}}.bind(this))},this.formatErrorMessage=function(ut){var ht=ut.userMessage||"";return ut.hasOwnProperty("messageContext")&&ut.messageContext&&ut.messageContext.length>0&&(ht=ht.replace(/{(\d)}/g,(function(ht,pt){var mt=ut.messageContext[parseInt(pt,10)];return mt||"..."}))),ht},this.watchPromise=function(pt,ft,vt,bt){pt.then((function(){ut.addVariants(vt,!1,bt,gt.state.ratings,gt.state.saveCount);var ht=void 0!==vt[0]?vt[0]:vt;return mt.sendBeacon(ht.productId,"onBasketChangeBeacon"),ft({success:!0,error:""})}),function(pt){pt=ut.normalizeError(pt,gt.state.resources.pdp_status_add_to_bag_failure),ut.addVariants(vt,pt,bt,gt.state.ratings,gt.state.saveCount);var mt,yt={action:"AddToBag"};yt=o(yt,vt),yt=o(yt,pt),yt=o(yt,pt.message[0]),ht.logError(new Error(ht.ERROR_TYPE.UserActionFailed),yt),mt="LegacyQuantityLimitReached"===pt.message[0].errorCode?this.error:this.formatErrorMessage(pt.message[0]),ft({success:!1,error:mt})}.bind(this))},this.formatAddProducts=function(ut){for(var ht=[],pt=0;pt<ut.length;pt++){var mt=a(ut[pt]);mt.colourName=void 0===mt.colourName?mt.colour:mt.colourName,ht.push(mt)}return ht},this}})),define("Components/add-item/add-item",["$","ko","text!./add-item.html","ProductUtils/Bag","ProductUtils/ScrollTo","ProductUtils/Window","PageConfig"],(function(ut,ht,pt,mt,gt,ft,vt){return{viewModel:function a(ut){this.isVisible=ut.state.productData.isInStock,this.imgUrl=ut.productImage,this.scrollToTop=ut.scrollToTop,this.url=ut.url,this.productId=ut.state.productData.productId,this.isMixMatch=ut.isMixMatch,this.resources=ut.state.resources,this.selectedColour=ut.state.selectedColour,this.selectedSize=ut.state.selectedSize,this.noColourSelected=ut.state.showNoColourSelectedWarning,this.noSizeSelected=ut.state.showNoSizeSelectedWarning,this.focusColourSelect=ut.state.focusColourSelect,this.focusSizeSelect=ut.state.focusSizeSelect,this.preventFocusScroll=ut.state.preventFocusScroll,this.addedToBag=ht.observable(!1),this.showProductTick=ht.observable(!1),this.failedToAdd=ut.state.showAddToBagError,this.failedToAddMessage=ut.state.addToBagErrorMessage,this.showTryAgain=ht.observable(!!ut.showTryAgain&&ut.showTryAgain),this.buttonText=ht.observable(this.resources.pdp_cta_add_to_bag),this.isBusy=ht.observable(!1),this.ariaLiveText=ht.computed((function(){var ut=this.failedToAddMessage();return ut||(this.addedToBag()?this.resources.pdp_status_add_to_bag_success:"")}),this),this.buttonCss=ht.computed(function(){return this.failedToAdd()&&this.showTryAgain()?"failed":""}.bind(this)),this.selectedSize.subscribe(function(ut){this.failedToAdd(!1),void 0!==ut&&this.noSizeSelected()&&this.noSizeSelected(!1)}.bind(this)),this.selectedColour.subscribe(function(ut){this.failedToAdd(!1),void 0!==ut&&this.noColourSelected()&&this.noColourSelected(!1)}.bind(this));var pt,ft=new mt(ut,ut.initiator);this.isValid=function(){return void 0===this.selectedColour()?(this.noColourSelected(!0),!1):void 0!==this.selectedSize()||(this.noSizeSelected(!0),!1)}.bind(this),this.addToBag=function(){this.isBusy()||(this.revertState(),this.isValid()&&(this.isBusy(!0),ft.addItems(this.selectedSize(),this.addToBagResult)))},this.focusUnSelected=function(){void 0===this.selectedColour()?this.focusColourSelect(!0):void 0===this.selectedSize()&&this.focusSizeSelect(!0)}.bind(this),this.addToBagResult=function(ut){this.isBusy(!1),ut.success?(this.addedToBag(!0),this.showProductTick(!0),this.buttonText(this.resources.pdp_status_add_to_bag_success),this.scrollToTop&&"mobile"!==vt.platform&&gt.scrollToTop(),pt&&clearTimeout(pt),pt=setTimeout(this.revertState,5e3)):(this.showTryAgain()&&this.buttonText(this.resources.pdp_status_error_add_item_try_again),this.failedToAdd(!0),this.failedToAddMessage(ut.error||this.resources.pdp_status_add_to_bag_failure))}.bind(this),this.revertState=function(){this.buttonText(this.resources.pdp_cta_add_to_bag),this.addedToBag(!1),this.showProductTick(!1),this.failedToAdd(!1),this.failedToAddMessage(""),this.isBusy(!1)}.bind(this)},template:pt}})),define("text!Components/size-guide/size-guide.html",[],(function(){return'\x3c!-- ko if: render() --\x3e\n<div class="size-guide-button">\n    <button data-testid="size-guide-button" class="link" data-bind="click: openSizeGuide($element), text: text"></button>\n</div>\n\x3c!-- /ko --\x3e\n'})),define("Components/size-guide/size-guide",["ko","text!./size-guide.html","ProductUtils/Window","ProductUtils/Analytics"],(function(ut,ht,pt,mt){return{viewModel:function s(ut){function e(){mt.firePageInteraction({context:"launchSizeGuide",productIID:ut.id})}this.text=ut.dictionary.pdp_size_guide_link,this.render=ut.visible,this.openSizeGuide=function(ht){return function(){e(),pt.asos.eventBus.emit("sizeGuideOpen",{url:ut.url,focusOnClose:ht})}}},template:ht}})),define("text!Components/mix-and-match/mix-and-match.html",[],(function(){return'<div class="product-hero">\n  <div class="separator"></div>\n</div>\n\n<ul>\n  \x3c!-- ko foreach: products --\x3e\n  <li class="item">\n    <a data-bind="attr: { \n          href: $parent.getProductLink($data), \n          \'aria-label\': $parent.productDetailsText \n    }, \n    click: $parent.navigateToFullProduct.bind($data, $index()), $element)\n    ">\n      <div class="product-image" data-bind="component: {\n        name: \'product-image\', \n        params: {\n          imgUrl: productImage.url,\n          type: \'thumbnail\',\n          size: 75\n        }\n      }">\n      </div>\n    </a>\n    <div class="product-info">\n      \x3c!--Product title--\x3e\n      <a\n        data-bind="attr: { href: $parent.getProductLink($data) }, click: $parent.navigateToFullProduct.bind($data, $index())">\n        <div class="product-title" data-bind="text: name"></div>\n        <div class="product-price"\n          data-bind=\'component: { name: "product-price", params: {state: $parent.getState($index()), showGermanVatMessage: $parent.options.showGermanVatMessage }}\'>\n        </div>\n        <div class="mm-rating" data-bind="attr: {id: \'overall-rating-portal-\' + $data.id}"></div>\n      </a>\n      <div data-bind="attr: {id: \'payment-promo-portal-\' + $data.id}"></div>\n      \x3c!-- ko if: $parent.variantIsOOS($index()) --\x3e\n      <span class="out-of-stock" data-bind="text: $parent.state.resources.pdp_status_mix_and_match_out_of_stock"></span>\n      \x3c!-- /ko --\x3e\n      \x3c!-- ko if: !$parent.variantIsOOS($index()) --\x3e\n      <div class="product-colour" data-bind=\'component:{\n        name: "product-colour",\n        params: {\n            isMixAndMatch: true,\n            useShortSelectColourLabel: true,state: $parent.getState($index()),\n            data: $data}\n        }\'></div>\n      \x3c!-- /ko --\x3e\n    </div>\n    \x3c!-- ko if: $parent.variantIsOOS($index()) --\x3e\n    <div class="save-for-later-portal oos" data-bind="attr: {id: \'save-for-later-portal-\' + $data.id}"></div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: !$parent.variantIsOOS($index()) --\x3e\n    <div data-bind=\'component:{\n      name: "product-size",\n      params: {\n          hideLabels: false,\n          hideLowInStock: false,\n          hideOnOutOfStock: true,\n          showSizeGuide: true,\n          isMixMatch: true,\n          isMobile: $parent.isMobile,\n          doNotSelectDefaultSize: !$parent.isMobile,\n          displayOnlyAsDropDown: !$parent.isMobile,\n          state: $parent.getState($index()),\n          data: $data,\n          context: "mixmatch",\n          selectorIndex: $index(),\n          sizeGuideOpened: $parent.state.sizeGuideOpened\n          }\n      }\'>\n    </div>\n\n    <div data-bind=\'component:{name: "add-item",\n      params:{\n          state: $parent.getState($index()),\n          initiator : "main",\n          isMixMatch: true,\n      }}\'></div>\n    <div class="save-for-later-portal" data-bind="attr: {id: \'save-for-later-portal-\' + $data.id}"></div>\n    \n    <div class="basic-error-box"\n      data-bind="visible: $parent.getState($index()).showAddToBagError, html: $parent.getState($index()).addToBagErrorMessage"\n      style="display: none"></div>\n    \x3c!-- /ko --\x3e\n    <div data-bind="attr: {id: \'delivery-and-returns-portal-\' + ($index())}, template: { afterRender: function() {\n      if($index() === $parent.products.length - 1) {\n          window.asos.pdp.deliveryAndReturnsPortalReady = true; window.asos.eventBus.emit(\'deliveryAndReturnsPortalReady\');\n      }\n    }}" style="float: left; width: 100%">\n    </div>\n    \x3c!-- ko if: ($index() !== $parent.products.length - 1)--\x3e\n    <div class="separator"></div>\n    \x3c!-- /ko --\x3e\n  </li>\n  \x3c!-- /ko --\x3e\n</ul>'})),define("Components/mix-and-match/mix-and-match",["ko","text!./mix-and-match.html","ProductUtils/Analytics","ProductUtils/UrlUtils","ProductUtils/Window","PageConfig"],(function(ut,ht,pt,mt,gt,ft){return{viewModel:function o(ut){this.context=ut.data,this.products=ut.data.products,this.state=ut.state,this.options=ut.options,this.isMobile="mobile"===ft.platform,this.showNoSizesSelectedWarning=ut.state.showNoSizesSelectedWarning,this.showAddToBagError=ut.state.showAddToBagError,this.addToBagErrorMessage=this.state.addToBagErrorMessage,this.variants=[],this.productDetailsText=this.state.resources.pdp_description_product_details_title;for(var ht=new mt,vt=this.products.length;vt--;)this.variants.push(this.context.States[vt].selectedSize);this.getState=function(ut){return this.context.States[ut]}.bind(this),this.variantIsOOS=function(ut){return!this.getState(ut).productData.isInStock}.bind(this),this.showOverlay=function(ut,ht){pt.firePageInteraction({context:"openModal",modalType:"mixAndMatch",productIID:this.products[ut].id}),gt.asos.eventBus.emit("productModalOpen",ht,this.products[ut].id)}.bind(this),this.getProductLink=function(ut){return ht.getProductUrl(ut.name,this.context.brandName,ut.id)+this.getQueryString()}.bind(this),this.navigateToFullProduct=function(ut){var ht=this.getProductLink(this.products[ut]);this.navigateTo(ht)}.bind(this),this.navigateTo=function(ut){window.location=ut},this.getQueryString=function(){return document.location.search}},template:ht}})),define("text!Components/product-colour/product-colour.html",[],(function(){return'\x3c!-- ko if: render && (colourDropdownVisible() || isMixAndMatch) --\x3e\n<section>\n    <div class="colour-size colour-component">\n        <div class="grid-row colour-section">\n            <label for="colourSelect" class="disabled" data-bind="\n                text: colourLabel,\n                attr: {\n                    \'for\': colourSelectorId\n                }\n            "></label>\n            \x3c!-- ko if: isMixAndMatch --\x3e\n                <span class="product-colour" data-bind="visible: colourLabelVisible(), text: selectedColourLabel(), css: { disabled: isDisabled }"></span>\n            \x3c!-- /ko --\x3e\n            <div class="colour-size-select" data-testid="colour-size-select" data-bind="visible: colourDropdownVisible()">\n                <select id="colourSelect"\n                        data-id="colourSelect"\n                        data-bind="optionsCaption: selectColourText,\n                        disable: isDisabled,\n                        options: data,\n                        optionsAfterRender: setColourOptionText,\n                        value: colour,\n                        css:{ required : noColourSelected()},\n                        attr: {\n                            \'id\': colourSelectorId,\n                            \'data-id\': colourSelectorId,\n                            \'aria-describedby\': noColourSelected() ? \'selectColourError\' : null,\n                            \'aria-invalid\': noColourSelected() ? true : null\n                        }"></select>\n                \x3c!-- ko if: noColourSelected() --\x3e\n                <span id="selectColourError" class="error basic-error-box" data-bind="text:selectColourPrompt"></span>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</section>\n\x3c!-- /ko --\x3e'})),define("Components/product-colour/product-colour",["ko","text!./product-colour.html","PageConfig","ProductUtils/Window"],(function(ut,ht,pt,mt){return{viewModel:function s(ht){var gt=ht.state,ft="undefined"!==ht.hideOnOutOfStock&&ht.hideOnOutOfStock;this.render=!(ft&&!gt.productData.isInStock),this.noColourSelected=ht.state.showNoColourSelectedWarning,this.focusColourSelect=ht.state.focusColourSelect,this.preventFocusScroll=ht.state.preventFocusScroll,this.isMixAndMatch=ht.isMixAndMatch,this.data=ut.observableArray(),this.colour=gt.selectedColour,this.colour.subscribe((function(ut){mt.asos.eventBus.emit("colourChosen",ut&&ut.colour)})),this.useShortSelectColourLabel=ht.useShortSelectColourLabel,this.selectColourPrompt=gt.resources.pdp_select_colour_message,this.colourLabel=gt.resources.pdp_misc_colour+":",this.isMobile="mobile"===pt.platform,this.notAvailableText=gt.resources.pdp_status_not_available,this.selectorIndex=ht.selectorIndex,this.context=ht.context,this.colourSelectorId="colour-select-"+gt.productData.productId,this.useShortSelectColourLabel?this.selectColourText=gt.resources.pdp_select_colour_label:this.selectColourText=gt.resources.pdp_select_colour_from_label,this.lowInStockText=gt.resources.pdp_status_low_in_stock;var vt=ht.state.productData;this.isDisabled=!ht.state.productData.isInStock;var bt=vt.colours;this.focusColourSelect.subscribe(function(ut){ut&&(document.getElementById(this.colourSelectorId).focus({preventScroll:!!this.preventFocusScroll()}),this.preventFocusScroll(!1),this.focusColourSelect(!1))}.bind(this)),this.noColourSelected.subscribe(function(ut){ut&&this.focusColourSelect(!0)}.bind(this)),this.data(bt),this.selectColourText=this.selectColourText.replace("%{count}",this.data().length),this.colourDropdownVisible=ut.computed(function(){return this.data().length>1}.bind(this)),this.colourLabelVisible=ut.computed(function(){return!this.colourDropdownVisible()}.bind(this)),this.setColourOptionText=function(ut,ht){ht&&(vt.hasDifferentPrices?ut.text=ht.colour+" "+ht.price.text:ut.text=ht.colour)},this.selectedColourLabel=ut.computed(function(){return this.colour()?this.colour().colour:""}.bind(this)),this.setDefaultColour=function(){1===this.data().length&&this.colour(this.data()[0])},this.setDefaultColour(),this.setVariantColour=function(ut,ht){for(var pt=0;pt<ut.length;pt++)if(ut[pt].colourWayId===ht){this.colour(ut[pt]);break}},ht.state.defaultVariant&&this.setVariantColour(this.data(),ht.state.defaultVariant.colourWayId)},template:ht}})),define("text!Components/product-size/product-size.html",[],(function(){return'\x3c!-- ko if: render() --\x3e\n<section>\n    <div class="colour-size size-component">\n        <div class="size-section" data-bind="visible: sizeSectionVisible()">\n            <div style="display: table; width: 100%">\n                <label\n                    for="sizeSelectorId"\n                    style="display: table-cell; vertical-align: bottom"\n                    data-bind="\n                        text: sizeLabel,\n                        visible: sizeDropdownVisible(),\n                        disable: isDisabled,\n                        attr: {\n                            \'for\': sizeSelectorId\n                        }"\n                ></label>\n                <div style="display: table-cell; vertical-align: top; width: 100%">\n                    <div data-testid="size-guide" class="size-guide" style="float: right;" data-bind=\'component: { name: "size-guide", params: { sizeGuideOpened: sizeGuideOpened, dictionary: sizeGuideDictionary , url: sizeGuideLink, visible: state.showSizeGuide, id:id}}\'></div>\n                </div>\n            </div>\n            \x3c!-- ko if: !isOneSize --\x3e\n            <span class="product-size" data-bind="visible: sizeLabelVisible(), text: selectedSizeLabel(), css: { disabled: isDisabled }"></span>\n            \x3c!-- /ko --\x3e\n            <div class="colour-size-select" data-testid="colour-size-select" data-bind="visible: sizeDropdownVisible(), markAndMeasure: \'pdp:size_selector_interactive\'">\n                <select\n                    id="sizeSelectorId"\n                    data-id="sizeSelect"\n                    data-bind="options: variants,\n                        optionsAfterRender: disableSizeIfOutOfStock,\n                        optionsText: \'Size\',\n                        optionsCaption: selectSizeText,\n                        value: size,\n                        disable: isDisabled || sizeDropdownDisabled(),\n                        css:{ required : noSizeSelected() },\n                        attr: {\n                            \'id\': sizeSelectorId,\n                            \'aria-label\': selectSizeText,\n                            \'aria-describedby\': noSizeSelected() ? \'selectSizeError\' : null,\n                            \'aria-invalid\': noSizeSelected()\n                        }"></select>\n                \x3c!-- ko if: noSizeSelected() --\x3e\n                <span id="selectSizeError" class="error basic-error-box" data-bind="text:selectSizePrompt"></span>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        <div class="grid-row low-in-stock" data-testid="lowInStock" data-bind="visible: isLowInStock() && !hideLowInStock">\n            <span class="clock"></span><span data-bind="text:lowInStockText"></span>\n        </div>\n    </div>\n</section>\n\x3c!-- /ko --\x3e\n'})),define("Components/product-size/product-size",["ko","text!./product-size.html","ProductUtils/Analytics","ProductUtils/Window"],(function(ut,ht,pt,mt){return{viewModel:function s(ht){var gt=ht.data,ft=ht.state,vt="undefined"!==ht.hideOnOutOfStock&&ht.hideOnOutOfStock;this.state=ft,this.noSizeSelected=ht.state.showNoSizeSelectedWarning,this.focusSizeSelect=ht.state.focusSizeSelect,this.preventFocusScroll=ht.state.preventFocusScroll,this.sizeGuideOpened=ht.isMixMatch?ht.sizeGuideOpened:ht.state.sizeGuideOpened,this.sizeGuideDictionary=ht.state.resources,this.sizeGuideLink=gt.sizeGuide,this.colour=ft.selectedColour,this.size=ft.selectedSize,this.alwaysDisplaySizeLabel=!1,this.isLowInStock=ut.observable(!1),this.hideLabels=ht.hideLabels,this.hideLowInStock=ht.hideLowInStock,this.displayOnlyAsDropDown=ht.displayOnlyAsDropDown||!1,this.doNotSelectDefaultSize=ht.doNotSelectDefaultSize||this.displayOnlyAsDropDown,this.id=gt.id,this.isOneSize=gt.isOneSize;var bt=[];this.size.subscribe(function(){var ut=this.size(),gt=null!=ut&&!0===ut.isLowInStock;ut&&-1===bt.indexOf(ut)&&(pt.fireFlexFulfilmentAnalyticsEvent(ut),bt.push(ut));var ft=ht.isMixMatch?ht.selectorIndex:null,vt={variantId:null,productId:this.id,mixAndMatchProductIndex:ft};ut&&(vt={variantId:ut.variantId,productId:ut.productId,mixAndMatchProductIndex:ft,source:ut.source,seller:ut.seller}),mt.asos.eventBus.emit("sizeChanged",vt),this.isLowInStock(gt)}.bind(this)),this.isDesktopMixMatch=ht.isMixMatch&&!ht.isMobile,this.selectorIndex=ht.selectorIndex,this.context=ht.context,this.sizeSelectorId=this.context+"-size-select-"+this.selectorIndex,this.variants=ut.computed(function(){return void 0===this.colour()?[]:this.colour().variants}.bind(this)),ft.showSizeGuide||(ft.showSizeGuide=ut.observable(!1)),ft.showSizeGuide(!0===ht.showSizeGuide&&gt.sizeGuideVisible),this.selectSizePrompt=ft.resources.pdp_select_colour_size_message,this.sizeLabel=ft.resources.pdp_misc_size+":",this.outOfStockText=ft.resources.pdp_status_out_of_stock,this.notAvailableText=ft.resources.pdp_status_not_available,this.selectSizeText=ft.resources.pdp_select_size_label,this.lowInStockText=ft.resources.pdp_status_low_in_stock;var yt=ht.state.productData;this.isDisabled=!ht.state.productData.isInStock;for(var St=yt.colours,wt=0,It=St.length-1;It>=0;It--){var xt=St[It];xt.variants.length>wt&&(wt=xt.variants.length)}this.focusSizeSelect.subscribe(function(ut){var ht=document.getElementById(this.sizeSelectorId);ut&&(ht.focus({preventScroll:!!this.preventFocusScroll()}),this.preventFocusScroll(!1),this.focusSizeSelect(!1))}.bind(this)),this.noSizeSelected.subscribe(function(ut){this.focusSizeSelect(ut)}.bind(this)),!this.displayOnlyAsDropDown&&!gt.isNoSize&&St.length>1&&1===wt&&(this.alwaysDisplaySizeLabel=!0),this.colour.subscribe(function(ut){void 0===ut||1!==this.colour().variants.length||this.displayOnlyAsDropDown?this.setDefaultSize():this.size(this.colour().variants[0])}.bind(this)),this.sizeDropdownVisible=ut.computed(function(){if(this.alwaysDisplaySizeLabel)return!1;if(this.displayOnlyAsDropDown)return!0;if(gt.isNoSize)return!1;var ut=void 0===this.colour(),ht=ut?0:this.colour().variants.length;return ut||ht>1}.bind(this)),this.sizeLabelVisible=ut.computed(function(){return!!this.alwaysDisplaySizeLabel||!this.displayOnlyAsDropDown&&!gt.isNoSize&&!this.sizeDropdownVisible()}.bind(this)),this.sizeSectionVisible=ut.computed(function(){return this.sizeLabelVisible()||this.sizeDropdownVisible()}.bind(this)),this.render=ut.computed(function(){return!(vt&&!ft.productData.isInStock)&&(!gt.isOneSize&&this.variants()&&this.variants().length>1)}.bind(this)),this.disableSizeIfOutOfStock=function(ht,pt){var mt;null!=pt&&(mt=yt.hasDifferentPrices&&void 0!==pt.price&&void 0!==pt.price.current?" - "+pt.price.current.text:"",pt.isInStock||(mt+=" - "+this.outOfStockText),ht.text=pt.size+mt,ut.applyBindingsToNode(ht,{enable:pt.isInStock},pt))}.bind(this),this.sizeDropdownDisabled=ut.computed(function(){return void 0===this.colour()}.bind(this)),this.selectedSizeLabel=ut.computed(function(){return this.alwaysDisplaySizeLabel?St[0].variants[0].size:this.size()?this.size().size:""}.bind(this)),this.setDefaultSize=function(){if(!this.doNotSelectDefaultSize&&void 0!==yt&&void 0!==this.variants()&&1===yt.colours.length){for(var ut,ht=yt.colours[0],pt=ht.variants.length-1;pt>=0;pt--)if(ht.variants[pt].isInStock){if(void 0!==ut){ut=void 0;break}ut=this.variants()[pt]}void 0!==ut&&this.size(ut)}},this.setVariantSize=function(ut,ht){for(var pt=0;pt<ut.length;pt++)if(ut[pt].variantId===ht){if(!ut[pt].isInStock){this.size(void 0);break}this.size(ut[pt]);break}},this.setDefaultSize(),ht.state.defaultVariant&&this.setVariantSize(this.variants(),ht.state.defaultVariant.variantId)},template:ht}})),define("Pages/MixAndMatch",["ko","ProductUtils/ComponentLoader","Asos.Utils.MediaPlayers","ProductUtils/StockPrice","Models/VariantDecorator","Components/product-image/product-image","Components/product-price/product-price","Components/add-item/add-item","Components/content/content","Components/size-guide/size-guide","Components/mix-and-match/mix-and-match","Components/product-gallery/product-gallery","Components/product-colour/product-colour","Components/product-size/product-size","Components/add-item/add-item","PageConfig","ProductUtils/NewRelicLogger","ProductUtils/ScrollTo","ProductUtils/Performance"],(function(ut,ht,pt,mt,gt,ft,vt,bt,yt,St,wt,It,xt,Pt,Tt,zt,Et){return this.init=function(){function a(ht){for(var pt=0;pt<ht.products.length;pt++){var mt={selectedColour:ut.observable(),selectedSize:ut.observable(),showNoColourSelectedWarning:ut.observable(!1),showNoSizeSelectedWarning:ut.observable(!1),focusColourSelect:ut.observable(!1),focusSizeSelect:ut.observable(!1),preventFocusScroll:ut.observable(!1),showAddToBagError:ut.observable(!1),addToBagErrorMessage:ut.observable(""),productImage:ht.products[pt].productImage.url,resources:yt,sizeGuideOpened:Ct.sizeGuideOpened,session:Ct.session};ht.products[pt].brandName=bt.brandName,mt.productData=(new gt).getData(ht.products[pt],!0),kt.push(mt)}Vt.States=kt,At.register({type:"content",name:"content1",elementId:"aside-content",useComponentTemplate:!1},Vt,Ct),Dt=!0}function l(){Mt||(window.asos.eventBus.addListener("productAndPriceData",(function(ut){Dt||a(ut)})),function e(){return _t.getStockPrice(Vt,a,(function(){})),e}(),At.register({type:"content",name:"content3",elementId:"gallery-content",useComponentTemplate:!1},Vt,this.state),ut.components.register("product-gallery",It),ut.components.register("size-guide",St),ut.components.register("product-image",ft),ut.components.register("product-colour",xt),ut.components.register("product-size",Pt),ut.components.register("product-price",vt),ut.components.register("mix-and-match",wt),ut.components.register("asos-video-player-prod",pt.videoPlayer),ut.components.register("asos-spin-viewer-prod",pt.spinViewer),ut.components.register("add-item",Tt),Mt=!0,window.asos.pdp.koComponents=At,window.asos.pdp.koState=Ct,window.asos.eventBus.emit("knockoutInitialised",At,Ct))}Et.init(Et.PAGE_TYPE.GRP);var bt=window.asos.pdp.config.product,yt=window.asos.pdp.config.translations;this.state={resources:yt,features:window.asos.pdp.config.features,selectedColour:ut.observable(),showNoSizesSelectedWarning:ut.observable(!1),focusColourSelect:ut.observable(!1),focusSizeSelect:ut.observable(!1),preventFocusScroll:ut.observable(!1),showAddToBagError:ut.observable(!1),addToBagErrorMessage:ut.observable(""),sizeGuideOpened:ut.observable(!1)},this.isMobile="mobile"===zt.platform,this.useProductIdForVideos=!0;var Ct=this.state,At=new ht,Vt="string"==typeof bt?JSON.parse(bt):bt;Vt||Et.logError(new Error(Et.ERROR_TYPE.ParseError),{action:"PageInit",message:"server-side product data missing or invalid"});var _t=new mt,kt=[],Mt=!1,Dt=!1;document.addEventListener("DOMContentLoaded",function(){l.call(this)}.bind(this)),document.getElementById("aside-content")&&document.getElementById("gallery-content")&&l.call(this)},this.init})),window.location.href.includes("/grp/")&&require(["Pages/MixAndMatch"],(function(ut){ut()})),define("PageConfig",(function(){var ut=window.asos.webContext.getWebContext();return{storeCode:ut.storeId,countryCode:ut.browseCountry,geoCountryCode:ut.geoCountry,currency:ut.browseCurrency,language:ut.browseLanguage,languageShort:ut.browseLanguage.substring(0,2),sizeSchema:ut.browseSizeSchema,keyStoreDataversion:ut.keyStoreDataversion,siteChromeTemplateVersion:ut.templateVersion,siteChromeTemplateBuild:ut.buildVersion,gender:ut.floor,siteDomain:window.asos.pdp.config.siteDomain,platform:ut.platform,storeId:ut.storeId,pageTitle:document.title,version:window.asos.pdp.config.appVersion,pageType:window.location.href.includes("/prd/")?"product":"mix&match",useTestFeaturesManifest:window.asos.pdp.config.useTestFeaturesManifest,imagePresets:JSON.parse(window.asos.pdp.config.imagePresets)}})),define("Promise",(function(){return Promise})),define("main",["Pages/FullProduct","Pages/MixAndMatch"],(function(){}));